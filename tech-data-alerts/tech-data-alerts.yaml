schemaVersion: 3
meta:
  sourceVersionId: 0197ae7a-5d69-7002-9e54-99dbcfd49856 # DO NOT CHANGE - Hex uses this to match up project versions when reimporting the file
  description: Esse notebook contém os alertas de inconsistências no nosso banco de dados
  projectId: 180416ec-9554-406b-bd4d-c4b4a95399be # DO NOT CHANGE - Unique ID of the project from which this file was generated
  title: "[TECH] Data alerts"
  timezone: null
  appTheme: SYS_PREF
  codeLanguage: PYTHON
  status: null
  categories: []
  castDecimalsDefault: true
  logicQueryCacheTimeout: null
  publishedQueryCacheTimeout: null
  hexType: PROJECT
  allowExecutionReordering: true
  prerunApp: false
  cachePublishedAppState: true
  refreshStalePublishedApp: false
  autoRerunApp: true
projectAssets:
  dataConnections: []
  envVars: []
  secrets: []
sharedAssets:
  secrets: []
  vcsPackages: []
  dataConnections:
    - dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030 # prod-mapa-org (postgres)
    - dataConnectionId: 76782ded-1434-4789-9408-441f56fb2e1f # old-prod-mapa-org (postgres)
    - dataConnectionId: e088838c-2205-4ff2-870b-07d163c93079 # prod-bonde (postgres)
  externalFileIntegrations: []
cells:
  - cellType: CODE
    cellId: b049966a-8b29-4a9d-bfcf-8ffd00d285d8 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Erros
    config:
      source: errors = []
  - cellType: MARKDOWN
    cellId: 8524b95f-e7c3-4048-8c71-1269518ebb20 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias disponíveis para match com condition != 'disponivel'"
  - cellType: SQL
    cellId: d3cd7862-9773-4728-b8ad-1989178b3553 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Voluntárias que estão disponíveis na tabela volunteer_availability, mas não disponíveis na tabela volunteers"
    config:
      source: |-
        SELECT COUNT(*)
        FROM volunteer_availability
        LEFT JOIN volunteers ON id = volunteer_id
        WHERE condition != 'disponivel' AND is_available = TRUE
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: available_volunteers
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: current_matches
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: is_available
            renameTo: null
            size: 118
            wrapText: null
            displayFormat: null
          - originalName: lat
            renameTo: null
            size: 83
            wrapText: null
            displayFormat: null
          - originalName: lng
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: max_matches
            renameTo: null
            size: 131
            wrapText: null
            displayFormat: null
          - originalName: offers_online_support
            renameTo: null
            size: 173
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: support_expertise
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 127
            wrapText: null
            displayFormat: null
          - originalName: volunteer_availability.city
            renameTo: null
            size: 191
            wrapText: null
            displayFormat: null
          - originalName: volunteer_id
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: e3d90b90-063d-45e6-afe1-03f775e8df56 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: Voluntárias que estão disponíveis na tabela volunteer_availability, mas não disponíveis na tabela volunteers"
    config:
      source: |-
        if(not available_volunteers.empty and available_volunteers['count'][0] != 0):
            errors.append("Existem voluntárias disponíveis para match com condition != 'disponivel'")
  - cellType: MARKDOWN
    cellId: 89984bf0-2ecb-4c95-929a-2051f763e86a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias condition = 'disponivel' e is_available = FALSE"
  - cellType: SQL
    cellId: 4bf484a5-b1a4-4017-982b-d29f903ed72b # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Voluntárias que estão com status Disponível mas is_available = FALSE"
    config:
      source: |-
        SELECT COUNT(*)
        FROM volunteer_availability
        LEFT JOIN volunteers ON id = volunteer_id
        WHERE condition = 'disponivel' AND is_available = FALSE
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: unavailable_volunteers
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: current_matches
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: is_available
            renameTo: null
            size: 118
            wrapText: null
            displayFormat: null
          - originalName: lat
            renameTo: null
            size: 83
            wrapText: null
            displayFormat: null
          - originalName: lng
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: max_matches
            renameTo: null
            size: 131
            wrapText: null
            displayFormat: null
          - originalName: offers_online_support
            renameTo: null
            size: 173
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: support_expertise
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 127
            wrapText: null
            displayFormat: null
          - originalName: volunteer_availability.city
            renameTo: null
            size: 191
            wrapText: null
            displayFormat: null
          - originalName: volunteer_id
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 7c119f1f-1463-417a-b0be-8ce754a3758c # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: Voluntárias que estão com status Disponível mas is_available = FALSE"
    config:
      source: |-
        if(not unavailable_volunteers.empty and unavailable_volunteers['count'][0] != 0):
            errors.append("Existem voluntárias condition = 'disponivel' e is_available = FALSE")
  - cellType: MARKDOWN
    cellId: caf79766-75cd-49f1-a7d6-97f61277a0ff # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias com discrepâncias no número de matches"
  - cellType: SQL
    cellId: 2b4cf9bf-0562-4666-9826-4b0516f83cd0 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: voluntárias com current_matches diferente do verificado na tabela matches"
    config:
      source: |-
        WITH match_count AS (
            SELECT
                volunteer_id,
                current_matches,
                COUNT(*) AS calculated_current_matches
            FROM match.matches 
            LEFT JOIN volunteer_availability USING (volunteer_id)
            WHERE 
                volunteer_id IS NOT NULL
                AND status IN ('waiting_contact', 'in_contact')
            GROUP BY volunteer_id, current_matches
        )
        SELECT COUNT(*)
        FROM match_count
        WHERE calculated_current_matches != current_matches
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: volunteers_match_count
      useRichDisplay: false
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig: null
  - cellType: CODE
    cellId: e9f2705f-e96a-48d7-b956-8e9dd43fa138 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: voluntárias com current_matches diferente do verificado na tabela matches"
    config:
      source: |-
        if(not volunteers_match_count.empty and volunteers_match_count['count'][0] != 0):
            errors.append("Existem voluntárias com discrepâncias no número de matches")
  - cellType: MARKDOWN
    cellId: 05dc8248-8cb1-481a-9e23-646483112368 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Voluntárias sem volunteer_availability"
  - cellType: SQL
    cellId: 6a945c3f-4563-470f-ae32-954c61f319dc # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Voluntárias sem volunteer_availability"
    config:
      source: |-
        SELECT COUNT(*)
        FROM volunteers
        LEFT JOIN volunteer_availability ON id = volunteer_id
        WHERE is_available IS NULL
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: no_volunteer_availability
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 82
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 26edf21e-643a-4d58-9cff-51f607773662 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: voluntárias sem volunteer_availability"
    config:
      source: |-
        if(not no_volunteer_availability.empty and no_volunteer_availability['count'][0] != 0):
            errors.append("Existem voluntárias que estão na tabela volunteers, mas não estão na tabela volunteer_availability")
  - cellType: MARKDOWN
    cellId: c94f11e1-980f-47d9-bbd5-c345415960df # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Voluntárias indiponíveis receberam match no último dia"
  - cellType: SQL
    cellId: 76bc3fb0-d44a-4f1c-a1ed-4ff3718cbb12 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Voluntárias indisponíveis que receberam match no último dia"
    config:
      source: |-
        SELECT 
            COUNT(*)
        FROM match.matches m
        LEFT JOIN volunteers v ON id = volunteer_id
        WHERE 
            m.created_at > CURRENT_DATE - INTERVAL '1 DAY'
            AND status = 'waiting_contact' 
            AND condition NOT IN ('disponivel', 'indisponivel_sem_vagas', 'indisponivel_aguardando_confirmacao', 'indisponivel_aguardando_confirmacao')
            AND match_type != 'manual'
            AND m.created_at >= v.updated_at
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: unavailable_volunteer_match_count
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: condition
            renameTo: null
            size: 185
            wrapText: null
            displayFormat: null
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: match_id
            renameTo: null
            size: 105
            wrapText: null
            displayFormat: null
          - originalName: match_stage
            renameTo: null
            size: 124
            wrapText: null
            displayFormat: null
          - originalName: match_type
            renameTo: null
            size: 119
            wrapText: null
            displayFormat: null
          - originalName: msr_id
            renameTo: null
            size: 133
            wrapText: null
            displayFormat: null
          - originalName: msr_zendesk_ticket_id
            renameTo: null
            size: 180
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: support_request_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 127
            wrapText: null
            displayFormat: null
          - originalName: volunteer_id
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
          - originalName: volunteer_zendesk_ticket_id
            renameTo: null
            size: 210
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: aac2fbc0-2a06-4979-95c4-62c7fe7d81e7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: Voluntárias indisponíveis que receberam match no último dia"
    config:
      source: |-
        if(not unavailable_volunteer_match_count.empty and unavailable_volunteer_match_count['count'][0] != 0):
            errors.append("Voluntárias indiponíveis receberam match no último dia")
  - cellType: MARKDOWN
    cellId: e31aab7e-5415-4a62-9057-7eed83d5cc62 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem inconsistências na tabela support_request_status_history"
  - cellType: SQL
    cellId: d4bffaf0-346b-40b2-bf88-300250775e38 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: inconsistências na tabela support_request_status_history"
    config:
      source: |-
        WITH rn_status_history AS (
            SELECT 
                support_request_id,
                status AS status_history,
                ROW_NUMBER() OVER(PARTITION BY support_request_id ORDER BY created_at DESC) AS rn
            FROM match.support_request_status_history
        ),
        most_recent_status_history AS (
            SELECT
                support_request_id,
                status_history
            FROM rn_status_history
            WHERE rn = 1
        )
        SELECT  COUNT(*)
        FROM match.support_requests
        LEFT JOIN most_recent_status_history USING (support_request_id)
        WHERE status != status_history
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: support_request_status_history
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: accepts_online_support
            renameTo: null
            size: 183
            wrapText: null
            displayFormat: null
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: has_disability
            renameTo: null
            size: 128
            wrapText: null
            displayFormat: null
          - originalName: msr_id
            renameTo: null
            size: 132
            wrapText: null
            displayFormat: null
          - originalName: priority
            renameTo: null
            size: 94
            wrapText: null
            displayFormat: null
          - originalName: requires_libras
            renameTo: null
            size: 136
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: status
            renameTo: null
            size: 88
            wrapText: null
            displayFormat: null
          - originalName: status_history
            renameTo: null
            size: 132
            wrapText: null
            displayFormat: null
          - originalName: support_expertise
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
          - originalName: support_request_id
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 127
            wrapText: null
            displayFormat: null
          - originalName: zendesk_ticket_id
            renameTo: null
            size: 153
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: a01e0fdd-fdd9-47f6-a19e-511c88ae9290 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: inconsistências na tabela support_request_status_history"
    config:
      source: |-
        if(not support_request_status_history.empty and support_request_status_history['count'][0] != 0):
            errors.append("Existem inconsistências na tabela support_request_status_history")
  - cellType: MARKDOWN
    cellId: 73d2a62c-ca87-46c5-8205-33bd67bb91b7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem inconsistências na tabela match_status_history"
  - cellType: SQL
    cellId: 5572a79a-96f6-43ed-98a9-7694baeb7315 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: inconsistências na tabela match_status_history"
    config:
      source: |-
        WITH rn_status_history AS (
            SELECT 
                match_id,
                status AS status_history,
                ROW_NUMBER() OVER(PARTITION BY match_id ORDER BY created_at DESC) AS rn
            FROM match.match_status_history
        ),
        most_recent_status_history AS (
            SELECT
                match_id,
                status_history
            FROM rn_status_history
            WHERE rn = 1
        )
        SELECT  COUNT(*)
        FROM match.matches
        LEFT JOIN most_recent_status_history USING (match_id)
        WHERE status != status_history
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: match_status_history
      useRichDisplay: false
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig: null
  - cellType: CODE
    cellId: 894d2fa3-3847-4f7e-96ed-a11442a9a16f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: inconsistências na tabela match_status_history"
    config:
      source: |-
        if(not match_status_history.empty and match_status_history['count'][0] != 0):
            errors.append("Existem inconsistências na tabela match_status_history")
  - cellType: MARKDOWN
    cellId: cbc2ceb9-0845-4c84-aa47-d9b65a7b331e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem inconsistências na tabela volunteer_status_history"
  - cellType: SQL
    cellId: 087bb058-3b94-4b4b-9211-9c8afd1d5ff9 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: inconsistências na tabela volunteer_status_history"
    config:
      source: |-
        WITH rn_status_history AS (
            SELECT 
                volunteer_id,
                status AS status_history,
                ROW_NUMBER() OVER(PARTITION BY volunteer_id ORDER BY created_at DESC) AS rn
            FROM volunteer_status_history
        ),
        most_recent_status_history AS (
            SELECT
                volunteer_id,
                status_history
            FROM rn_status_history
            WHERE rn = 1
        )
        SELECT COUNT(*)
        FROM volunteers
        LEFT JOIN most_recent_status_history ON id = volunteer_id
        WHERE condition != status_history
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: volunteer_status_history
      useRichDisplay: false
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig: null
  - cellType: CODE
    cellId: b24ec0c6-6f25-4d66-9e0a-7d5d7c8232f4 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: inconsistências na tabela volunteer_status_history"
    config:
      source: |-
        if(not match_status_history.empty and volunteer_status_history['count'][0] != 0):
            errors.append("Existem inconsistências na tabela volunteer_status_history")
  - cellType: MARKDOWN
    cellId: c7a10e04-e5d8-44fd-b640-39ce709a72cf # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Voluntárias teste se tornaram disponíveis para match"
  - cellType: SQL
    cellId: f5716778-6cc1-4476-8990-df0d6cbc5643 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Voluntárias teste se tornaram disponíveis"
    config:
      source: |-
        SELECT 
            COUNT(*)
        FROM volunteers
        INNER JOIN volunteer_availability ON id = volunteer_id
        WHERE 
            email IN ('dev.psi.mapa@gmail.com', 'dev.adv.mapa@gmail.com')
            AND is_available = TRUE
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: voluntarias_teste
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: condition
            renameTo: null
            size: 105
            wrapText: null
            displayFormat: null
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: email
            renameTo: null
            size: 170
            wrapText: null
            displayFormat: null
          - originalName: first_name
            renameTo: null
            size: 113
            wrapText: null
            displayFormat: null
          - originalName: id
            renameTo: null
            size: 68
            wrapText: null
            displayFormat: null
          - originalName: last_name
            renameTo: null
            size: 156
            wrapText: null
            displayFormat: null
          - originalName: phone
            renameTo: null
            size: 129
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
          - originalName: volunteers.created_at
            renameTo: null
            size: 195
            wrapText: null
            displayFormat: null
          - originalName: volunteers.updated_at
            renameTo: null
            size: 242
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 62661fdc-78ba-481f-a167-2fc80caf3773 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: Voluntárias teste se tornaram disponíveis"
    config:
      source: |-
        if(not voluntarias_teste.empty and voluntarias_teste['count'][0] != 0):
            errors.append("Voluntárias teste se tornaram disponíveis para match")
  - cellType: MARKDOWN
    cellId: b1471b0d-82bd-4084-b641-014d94d9f185 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias com current_matches >= max_matches e estão disponíveis"
  - cellType: SQL
    cellId: e7a581c6-1a76-4b9d-a833-67496b0d1086 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: voluntárias com current_matches >= max_matches e estão disponíveis"
    config:
      source: |-
        SELECT COUNT(*)
        FROM volunteer_availability
        LEFT JOIN volunteers ON id = volunteer_id
        WHERE 
            current_matches >= max_matches 
            AND is_available
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: voluntarias_current_matches
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: array_agg
            renameTo: null
            size: 843
            wrapText: null
            displayFormat: null
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: current_matches
            renameTo: null
            size: 147
            wrapText: null
            displayFormat: null
          - originalName: is_available
            renameTo: null
            size: 118
            wrapText: null
            displayFormat: null
          - originalName: lat
            renameTo: null
            size: 162
            wrapText: null
            displayFormat: null
          - originalName: max_matches
            renameTo: null
            size: 131
            wrapText: null
            displayFormat: null
          - originalName: offers_online_support
            renameTo: null
            size: 173
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 24
            wrapText: null
            displayFormat: null
          - originalName: support_expertise
            renameTo: null
            size: 400
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 127
            wrapText: null
            displayFormat: null
          - originalName: volunteer_id
            renameTo: null
            size: 122
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 12159fe3-c1c2-4eae-98ef-acc75458131e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: voluntárias com current_matches >= max_matches e estão disponíveis"
    config:
      source: |-
        if(not voluntarias_teste.empty and voluntarias_teste['count'][0] != 0):
            errors.append("Existem voluntárias com current_matches >= max_matches e estão disponíveis")
  - cellType: MARKDOWN
    cellId: 357741dc-8374-485f-ab60-6cd1733692a5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem MSRs sem support_request"
  - cellType: SQL
    cellId: 687a1e4f-2eee-4741-89fd-3b8c60b74dea # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: MSRs que estão no bonde mas não possuem support_request "
    config:
      source: |-
        SELECT 
            COUNT(DISTINCT msr_id)
        FROM msr.msrs m
        LEFT JOIN match.support_requests s USING(msr_id)
        WHERE support_request_id IS NULL
        AND m.created_at >= '2024-09-12' -- data de lançamento do novo cadastro de MSRs
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: msrs_without_support_request
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: support_type
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 85
            wrapText: null
            displayFormat: null
          - originalName: msr_id
            renameTo: null
            size: 133
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: string_agg
            renameTo: null
            size: 138
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 387
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 4a1e2c16-8506-486d-b0df-f72fd2e21966 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: MSRs que estão no bonde mas não possuem support_request "
    config:
      source: |-
        if(not msrs_without_support_request.empty and msrs_without_support_request['count'][0] != 0):
            errors.append("Existem MSRs sem support_request")
  - cellType: MARKDOWN
    cellId: 3f5f54da-b51c-4731-8f1c-b06156d5b684 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem MSRs desabilitadas com support_request"
  - cellType: SQL
    cellId: 4c5ebd1f-c12a-4b8a-b00e-355fe1a41c15 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "SQL: Msrs desabilitadas"
    config:
      source: |-
        SELECT COUNT(DISTINCT msr_id)
        FROM msr.msrs m
        LEFT JOIN match.support_requests s USING(msr_id)
        WHERE m.status = 'unregistered'
        AND s.status != 'closed'
        AND support_request_id IS NOT NULL
        AND m.created_at >= '2024-09-12' -- data de lançamento do novo cadastro de MSRs
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: msrs_desabilitadas
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 82
            wrapText: null
            displayFormat: null
          - originalName: created_at
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: email
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: iana_time_zone
            renameTo: null
            size: 168
            wrapText: null
            displayFormat: null
          - originalName: id
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: msr_id
            renameTo: null
            size: 133
            wrapText: null
            displayFormat: null
          - originalName: name
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: phone
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: shared_phone_number
            renameTo: null
            size: 228
            wrapText: null
            displayFormat: null
          - originalName: time_zone
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: updated_at
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: url
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: user_id
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 732051ce-1888-4ed5-bff9-4b9b3deb5cab # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Python: MSRs desabilitadas com support_request"
    config:
      source: |-
        if(not msrs_desabilitadas.empty and msrs_desabilitadas['count'][0] != 0):
            errors.append("Existem MSRs desabilitadas com support_request")
  - cellType: MARKDOWN
    cellId: 485699f0-bc94-457a-ad94-590cf1357162 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem match_confirmations que deveriam ter expirado"
  - cellType: SQL
    cellId: 10643993-3710-4c27-897b-a22d1330800a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Expired match confirmations
    config:
      source: |-
        SELECT COUNT(*)
        FROM match.match_confirmations
        WHERE 
            (EXTRACT(EPOCH FROM (CURRENT_TIMESTAMP - created_at))/3600) >= 25
            AND status = 'waiting'
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: expired_match_confirmations
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 82
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 815d1c39-a656-469a-8089-1f12386ef5f6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        if(not expired_match_confirmations.empty and expired_match_confirmations['count'][0] != 0):
            errors.append("Existem match_confirmations que deveriam ter expirado")
  - cellType: MARKDOWN
    cellId: 0197ae6c-0540-7332-9a1e-984bce0d0f8b # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "### Existem voluntárias com statuas insdiponível aguardando confirmação sem um registro de match_confirmation aberto"
  - cellType: SQL
    cellId: 0197ae6d-296b-7332-9a1f-fdfee030c74e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Volunteers with wrong status
    config:
      source: |-
        SELECT COUNT(*)
        FROM public.volunteers v
        WHERE v.condition = 'indisponivel_aguardando_confirmacao'
        AND NOT EXISTS (
            SELECT 1 
            FROM match.match_confirmations mc 
            WHERE mc.volunteer_id = v.id 
            AND mc.status = 'waiting'
        );
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: volunteers_with_wrong_status
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 84
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 0197ae73-7513-7332-9a21-9855d5534a57 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        if(not volunteers_with_wrong_status.empty and volunteers_with_wrong_status['count'][0] != 0):
            errors.append("Existem voluntárias com statuas insdiponível aguardando confirmação sem um registro de match_confirmation aberto")
  - cellType: MARKDOWN
    cellId: dc56d7ab-42d6-4a42-8ebe-4a81c71c92e6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias disponíveis sem telefone"
  - cellType: SQL
    cellId: 8a7f7de4-4fba-4618-8490-7e2a8ec722cb # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Available volunteer without phone
    config:
      source: |-
        SELECT COUNT(*)
        FROM volunteer_availability
        LEFT JOIN volunteers ON id = volunteer_id
        WHERE is_available = TRUE AND phone = 'not_found'
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: available_volunteer_without_phone
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 82
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 39
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: c14ca0cb-bb58-4afc-9e6e-6e254cfdfab4 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        if(not available_volunteer_without_phone.empty and available_volunteer_without_phone['count'][0] != 0):
            errors.append("Existem voluntárias disponíveis sem telefone")
  - cellType: MARKDOWN
    cellId: a6138a90-de7a-475e-ab1a-a2571724df68 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "#### Existem voluntárias sem moodle_id"
  - cellType: SQL
    cellId: a7db445b-e1ae-4616-b44b-82652f3e1a48 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Volunteer null moodle id
    config:
      source: |-
        WITH volunteers_recadastro AS (
            SELECT 
                id as volunteer_id, 
                first_name, 
                last_name, 
                email, 
                occupation, 
                city 
            FROM volunteers
            INNER JOIN volunteer_segments ON id = volunteer_id
            WHERE 
                segment_name = 'recadastro_2024'
                AND years_of_experience != 'not_found'
                AND moodle_id IS NULL 
                AND condition != 'cadastrada'
        ),
        new_volunteers AS (
            SELECT 
                id as volunteer_id, 
                first_name, 
                last_name, 
                email, 
                occupation, 
                city 
            FROM volunteers
            WHERE 
                moodle_id IS NULL AND 
                condition = 'cadastrada'
        ),
        all_volunteers AS (
            SELECT *
            FROM volunteers_recadastro
            UNION ALL 
            SELECT *
            FROM new_volunteers
        )
        SELECT COUNT(*)
        FROM all_volunteers
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: volunteer_null_moodle_id
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: city
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: condition
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: count
            renameTo: null
            size: 82
            wrapText: null
            displayFormat: null
          - originalName: created_at
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: email
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: first_name
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: id
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: last_name
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: latitude
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: neighborhood
            renameTo: null
            size: 144
            wrapText: null
            displayFormat: null
          - originalName: phone
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: register_number
            renameTo: null
            size: 180
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 24
            wrapText: null
            displayFormat: null
          - originalName: state
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: updated_at
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
          - originalName: zipcode
            renameTo: null
            size: 120
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 39eb8660-5c96-486c-a859-9931742d15ac # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        if(not volunteer_null_moodle_id.empty and volunteer_null_moodle_id['count'][0] != 0):
            errors.append("Existem voluntárias sem moodle_id")
  - cellType: MARKDOWN
    cellId: 0197a265-96d1-7558-a98f-007a78e7d529 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: "### Existem novos registros de matches sem o id da voluntária"
  - cellType: SQL
    cellId: 0197a265-81e8-7558-a98e-a941b3331e05 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Matches without volunteer id
    config:
      source: select count(*) from match.matches where volunteer_id is null and created_at >= '2024-01-01'
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: matches_without_volunteer_id
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        defaultColumnWidth: null
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        calcs: null
        filters: null
        columnProperties:
          - originalName: count
            renameTo: null
            size: 84
            wrapText: null
            displayFormat: null
          - originalName: created_at
            renameTo: null
            size: 196
            wrapText: null
            displayFormat: null
          - originalName: match_id
            renameTo: null
            size: 104
            wrapText: null
            displayFormat: null
          - originalName: match_stage
            renameTo: null
            size: 121
            wrapText: null
            displayFormat: null
          - originalName: match_type
            renameTo: null
            size: 116
            wrapText: null
            displayFormat: null
          - originalName: msr_id
            renameTo: null
            size: 133
            wrapText: null
            displayFormat: null
          - originalName: msr_zendesk_ticket_id
            renameTo: null
            size: 177
            wrapText: null
            displayFormat: null
          - originalName: row-index-0
            renameTo: null
            size: 46
            wrapText: null
            displayFormat: null
          - originalName: status
            renameTo: null
            size: 172
            wrapText: null
            displayFormat: null
          - originalName: support_request_id
            renameTo: null
            size: 159
            wrapText: null
            displayFormat: null
          - originalName: support_type
            renameTo: null
            size: 124
            wrapText: null
            displayFormat: null
          - originalName: updated_at
            renameTo: null
            size: 196
            wrapText: null
            displayFormat: null
          - originalName: volunteer_id
            renameTo: null
            size: 119
            wrapText: null
            displayFormat: null
          - originalName: volunteer_zendesk_ticket_id
            renameTo: null
            size: 207
            wrapText: null
            displayFormat: null
        columnOrdering: null
        customColumnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
        pinIndexColumns: false
        showAggregations: false
        columnAggregations: null
  - cellType: CODE
    cellId: 0197a268-8845-7558-a990-b3a91754271a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        if(not matches_without_volunteer_id.empty and matches_without_volunteer_id['count'][0] != 0):
            errors.append("Existem novos registros de matches sem o id da voluntária")
  - cellType: CODE
    cellId: dfc0adcb-948b-44d4-a357-317f9fc425e5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: raise errors
    config:
      source: |-
        if(len(errors) > 0):
            exception = "Alertas de dados: \n"
            for item in errors:
                exception += str(errors.index(item) + 1) + ". " + item + "\n"
            raise Exception(exception)
appLayout:
  visibleMetadataFields:
    - NAME
    - DESCRIPTION
    - AUTHOR
    - LAST_EDITED
    - LAST_RUN
    - CATEGORIES
    - STATUS
    - TABLE_OF_CONTENTS
  fullWidth: false
  tabs:
    - name: Tab 1
      rows:
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: true
                  hideOutput: false
                  type: CELL
                  cellId: dfc0adcb-948b-44d4-a357-317f9fc425e5
                  sharedFilterId: null
                  height: null
                  showLabel: true
sharedFilters: []
