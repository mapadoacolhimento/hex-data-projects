schemaVersion: 3
meta:
  sourceVersionId: 2d61bfc6-0dd0-4000-b4f4-d8f3a3aa55a2 # DO NOT CHANGE - Hex uses this to match up project versions when reimporting the file
  description: null
  projectId: 4b26f8c2-b133-47e5-b739-8ea75e22e09a # DO NOT CHANGE - Unique ID of the project from which this file was generated
  title: "[PROV SERV] MSRs"
  timezone: null
  appTheme: SYS_PREF
  codeLanguage: PYTHON
  status: null
  categories: []
  castDecimalsDefault: true
  logicQueryCacheTimeout: null
  publishedQueryCacheTimeout: null
projectAssets:
  dataConnections: []
  envVars: []
  secrets: []
sharedAssets:
  secrets: []
  vcsPackages: []
  dataConnections:
    - dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030 # prod-mapa-org (postgres)
  externalFileIntegrations: []
cells:
  - cellType: MARKDOWN
    cellId: a321b720-6994-440d-8a99-8284253733b5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: MSRs cadastradas
    config:
      source: |-
        # MSRs cadastradas
        MSRs que se cadastraram no Mapa e realizaram um pedido de acolhimento válido. MSRs fora do perfil ou sem tickets no Zendesk não estão contabilizadas. A data de cadastro considerada é a data de abertura do pedido de acolhimento.
  - cellType: BLOCK
    cellId: ae3924f2-3eb9-4c61-9d32-c8700a225565 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 0d81bcd1-5686-49c3-bea5-56215e32c5c5
        chartCellId: a6e89fa5-15ef-496f-b2f8-e1fac76eafb1
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 0d81bcd1-5686-49c3-bea5-56215e32c5c5
          cellLabel: "MSRs: cumulativo"
          config:
            source: |-
              WITH distinct_msr AS (
                  SELECT 
                      msr_id,
                      MIN(created_at) AS created_at
                  FROM match.support_requests
                  GROUP BY msr_id
              ),
              msr_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(msr_id) AS "MSRs por ano"
                  FROM distinct_msr    
                  GROUP BY 1
              )
              SELECT
                  *,
                  SUM("MSRs por ano") OVER(ORDER BY ano)::INT AS "total de MSRs"
              FROM msr_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: msrs_cadastradas_total
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: a6e89fa5-15ef-496f-b2f8-e1fac76eafb1
          cellLabel: cumulativo
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: area
                      axis:
                        type: number
                        style:
                          max: 20000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "     "
                      dataFrameColumns:
                        - total de MSRs
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#665191"
                      opacity:
                        type: static
                        value: 0.5
                      tooltip:
                        type: auto
                      dataLabels:
                        angle: 0
                        color: "#3F4257"
                        fontSize: 10
                        position: above-left
                      line: true
                      point: true
                      normalize: false
                  dataFrame: msrs_cadastradas_total
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 08ebd385-c8c5-4d65-ab8e-a464c753d194 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 8e562d19-a572-4175-ae6b-9c2cd8665ddf
        chartCellId: 3aa479a8-957f-428a-9e47-5b97ac7497de
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 8e562d19-a572-4175-ae6b-9c2cd8665ddf
          cellLabel: "MSRs: por ano"
          config:
            source: |-
              WITH distinct_msr AS (
                  SELECT 
                      msr_id,
                      MIN(created_at) AS created_at
                  FROM match.support_requests
                  GROUP BY msr_id
              ),
              msr_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(msr_id) AS "MSRs por ano"
                  FROM distinct_msr    GROUP BY 1
              )
              SELECT
                  *
              FROM msr_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: msrs_cadastradas_por_ano
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 3aa479a8-957f-428a-9e47-5b97ac7497de
          cellLabel: por ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 6000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "      "
                      dataFrameColumns:
                        - MSRs por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#665191"
                      opacity:
                        type: static
                        value: 0.7
                      tooltip:
                        type: auto
                      dataLabels:
                        color: "#3F4257"
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: msrs_cadastradas_por_ano
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_6
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 662b7274-353e-4a30-a2d6-f8c1d5210884 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: aa413244-21e7-4eee-bd3e-15c02671c263
        chartCellId: 1889345f-016e-4b2c-80de-fb1636b8fa13
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: aa413244-21e7-4eee-bd3e-15c02671c263
          cellLabel: "MSRs: por mês no último ano"
          config:
            source: |-
              WITH distinct_msr AS (
                  SELECT 
                      msr_id,
                      MIN(created_at) AS created_at
                  FROM match.support_requests
                  GROUP BY msr_id
              ),
              msr_per_month AS (
                  SELECT
                      DATE_TRUNC('month', created_at) AS "mês",
                      COUNT(DISTINCT msr_id) AS "MSRs por mês"
                  FROM distinct_msr
                  WHERE created_at >= CURRENT_DATE - INTERVAL '1 YEAR'
                  GROUP BY 1
              )
              SELECT *
              FROM msr_per_month
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: msrs_cadastradas_por_mes
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 1889345f-016e-4b2c-80de-fb1636b8fa13
          cellLabel: por mês no último ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: f4161324-1f31-49c8-a1ad-0f1a04b9b6ad
                  xAxis:
                    type: datetime
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: mês
                    timeUnit: yearmonth
                    dataFrameColumn: mês
                  series:
                    - id: 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      type: line
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "     "
                      dataFrameColumns:
                        - MSRs por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#665191"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: auto
                      dataLabels:
                        color: "#3F4257"
                        fontSize: 10
                        position: above
                      point: true
                      stroke: solid
                      width: 2
                  dataFrame: msrs_cadastradas_por_mes
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: c002bb69-1b10-47d1-b372-a3b49ef81ba5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Pedidos de acolhimento
    config:
      source: |-
        --------------
        # Pedidos de acolhimento
        Cada MSR pode pedir até dois pedidos de acolhimento: um psicológico e um jurídico. Solicitações repetidas não estão contabilizadas.
  - cellType: MARKDOWN
    cellId: afedb86f-ee9b-4cda-8d20-82000ca4f84a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Pedidos de acolhimento: Série histórica"
    config:
      source: "##### Série histórica"
  - cellType: BLOCK
    cellId: 019bc48d-670c-411e-8aec-4609d2054d2a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: bd1e7eb7-53d6-4a21-a675-c618354b8000
        chartCellId: f53729ca-5e93-4b56-8a94-3ca0a23d2c30
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: bd1e7eb7-53d6-4a21-a675-c618354b8000
          cellLabel: "Pedidos de acolhimento: cumulativo"
          config:
            source: |-
              WITH support_request_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1
              )
              SELECT
                  *,
                  SUM("pedidos de acolhimento por ano") OVER(ORDER BY ano)::INT AS "total de pedidos de acolhimento"
              FROM support_request_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: f53729ca-5e93-4b56-8a94-3ca0a23d2c30
          cellLabel: cumulativo
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: area
                      axis:
                        type: number
                        style:
                          max: 25000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - total de pedidos de acolhimento
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ffa600"
                      opacity:
                        type: static
                        value: 0.4
                      tooltip:
                        type: auto
                      dataLabels:
                        angle: 0
                        color: "#3F4257"
                        fontSize: 10
                        position: above-left
                      line: true
                      point: true
                      normalize: false
                  dataFrame: pedidos_de_acolhimento_total
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_2
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 5d50e3e7-741e-43ea-8cd9-19a3475a8615 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 838856fc-81e0-4c56-bd35-543b18e2a722
        chartCellId: 960089ca-c702-4bec-877b-e1ad907c1438
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 838856fc-81e0-4c56-bd35-543b18e2a722
          cellLabel: "Pedidos de acolhimento: por ano"
          config:
            source: |-
              WITH support_request_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1
              )
              SELECT
                  *
              FROM support_request_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_ano
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 960089ca-c702-4bec-877b-e1ad907c1438
          cellLabel: por ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 7000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "      "
                      dataFrameColumns:
                        - pedidos de acolhimento por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ffa600"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: auto
                      dataLabels:
                        color: "#3F4257"
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_ano
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_7
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: cb616c07-c544-4e05-b161-6131d006a4d5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 015535df-0080-49e2-b500-c495c5850131
        chartCellId: 74dc11fd-9684-43b9-a122-c19c9d57b221
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 015535df-0080-49e2-b500-c495c5850131
          cellLabel: "Pedidos de acolhimento: por mês no último ano"
          config:
            source: |-
              WITH support_request_per_month AS (
                  SELECT
                      DATE_TRUNC('month', created_at) AS "mês",
                      COUNT(*) AS "pedidos de acolhimento por mês"
                  FROM match.support_requests
                  WHERE 
                      created_at >= CURRENT_DATE - INTERVAL '1 YEAR'
                      AND status != 'duplicated'
                  GROUP BY 1
              )
              SELECT *
              FROM support_request_per_month
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_mes
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 74dc11fd-9684-43b9-a122-c19c9d57b221
          cellLabel: por mês no último ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: f4161324-1f31-49c8-a1ad-0f1a04b9b6ad
                  xAxis:
                    type: datetime
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: mês
                    timeUnit: yearmonth
                    dataFrameColumn: mês
                  series:
                    - id: 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      type: line
                      axis:
                        type: number
                        style:
                          max: 500
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - pedidos de acolhimento por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ffa600"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: auto
                      dataLabels:
                        color: "#3F4257"
                        fontSize: 10
                        position: above
                      point: true
                      stroke: solid
                      width: 2
                  dataFrame: pedidos_de_acolhimento_por_mes
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_3
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 447de4f4-a368-4494-a61c-2745bdaaf06a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Pedidos de acolhimento: Por território"
    config:
      source: "##### Por território"
  - cellType: INPUT
    cellId: 1c55bd0e-de54-4cb9-845e-4b5a78992a2e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Filtro de tempo para os dados de território
    config:
      inputType: DROPDOWN
      name: support_request_time_filter
      outputType: STRING
      options:
        valueOptions:
          - Ver dados apenas dos últimos 12 meses
          - Ver dados desde o início do Mapa
      defaultValue: Ver dados apenas dos últimos 12 meses
  - cellType: BLOCK
    cellId: 744e0c76-de8d-4909-89e7-134ebda67c6f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: e2b99b3d-df80-4357-8e7b-b82ab776b72e
        chartCellId: 5a8eb824-162c-4cb7-9088-71ed2303313f
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: e2b99b3d-df80-4357-8e7b-b82ab776b72e
          cellLabel: "Pedidos de acolhimento: estados"
          config:
            source: |-
              SELECT
                  state AS estado,
                  COUNT(*) AS "pedidos de acolhimento por estado"
              FROM match.support_requests
              WHERE 
                  status != 'duplicated'
                  AND state != 'not_found'
                  AND created_at >= CASE WHEN {{ support_request_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              GROUP BY state
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_estado
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: count
                  renameTo: null
                  size: 85
                  wrapText: null
                  displayFormat: null
                - originalName: state
                  renameTo: null
                  size: 82
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 5a8eb824-162c-4cb7-9088-71ed2303313f
          cellLabel: estados
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e6ed243e-00e3-4439-9d5e-b6ab3f57213b
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "    "
                    dataFrameColumn: estado
                  series:
                    - id: 8e2d44ac-b336-4aa9-90dd-0981a7f73d58
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - pedidos de acolhimento por estado
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ffa600"
                      opacity:
                        type: static
                        value: 0.6
                      dataLabels:
                        color: "#3F4257"
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_estado
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: e5a0bf5e-a0ea-46f1-97a9-ad98914f9d80 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 7810c2a3-04b0-4b7f-8cba-567a6b95d632
        chartCellId: 8677e808-6e42-4caf-a46a-26ca27ca5a4f
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 7810c2a3-04b0-4b7f-8cba-567a6b95d632
          cellLabel: "Pedidos de acolhimento: regiões"
          config:
            source: |-
              WITH regioes AS (
                  SELECT
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      COUNT(*) AS "pedidos de acolhimento por região"
                  FROM match.support_requests
                  WHERE
                      status != 'duplicated'
                      AND created_at >= CASE WHEN {{ support_request_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT *
              FROM regioes 
              WHERE "região" NOT IN ('internacional', 'não encontrado')
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 8677e808-6e42-4caf-a46a-26ca27ca5a4f
          cellLabel: regiões
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: região
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - pedidos de acolhimento por região
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ffa600"
                      opacity:
                        type: static
                        value: 0.6
                      dataLabels:
                        color: "#3F4257"
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_regiao
              settings:
                legend:
                  position: top
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#BAB0AC"
              não capital: "#EECA3B"
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 8f68ba1f-5c19-41e6-b838-79c7ebd7aac6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 333a89b1-3bd7-4a43-8bb2-d17184ba98f7
        chartCellId: 0f21fc9c-4e76-4eb2-9dc4-29c131f213e9
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 333a89b1-3bd7-4a43-8bb2-d17184ba98f7
          cellLabel: "Pedidos de acolhimento: capitais x não capitais"
          config:
            source: |+
              SELECT
                  CASE 
                      WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                      WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                      WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                      WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                      WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                      WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                      WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                      WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                      WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                      WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                      WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                      WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                      WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                      WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                      WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                      WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                      WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                      WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                      WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                      WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                      WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                      WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                      WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                      WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                      WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                      WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                      WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                     ELSE 'não capital'
                  END AS capital,
                  COUNT(*) AS "pedidos de acolhimento"
              FROM match.support_requests
              WHERE 
                  status != 'duplicated'
                  AND created_at >= CASE WHEN {{ support_request_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              AND city != 'not_found'
              GROUP BY 1

            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_capitais
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 0f21fc9c-4e76-4eb2-9dc4-29c131f213e9
          cellLabel: capitais x não capitais
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e54ae934-f6c1-4056-a21e-d9a67297a414
                  xAxis:
                    sort: x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels:
                        angle: 0
                    title: "    "
                    dataFrameColumn: capital
                  series:
                    - id: b65f5fbb-42bc-40e3-a359-3f4638a63668
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - pedidos de acolhimento
                      colorDataFrameColumn: capital
                      colorOrder: descending
                      color:
                        type: series
                        colorsBySeriesValues:
                          capital: "#ffa600"
                          não capital: "#fed6ab"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          capital: 0.6
                          não capital: 0.8
                      dataLabels:
                        color: "#3F4257"
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_capitais
              settings:
                legend:
                  position: none
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#4C78A8"
              não capital: "#F58518"
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: ce102719-ed51-4922-b9cf-6068d86f6629 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 4cc12feb-bf66-4980-87eb-505c1f98109e
        chartCellId: 7784dcec-f50e-46c2-b95d-9a9c4f936dfd
        activeTab: preview
      cells:
        - cellType: SQL
          cellId: 4cc12feb-bf66-4980-87eb-505c1f98109e
          cellLabel: "Pedidos de acolhimento: lat lng"
          config:
            source: |-
              SELECT  
                  lat,
                  lng
              FROM match.support_requests
              WHERE 
                      status != 'duplicated' 
                      AND lat IS NOT NULL
                      AND lng IS NOT NULL
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_lat_lng
            useRichDisplay: false
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: lat
                  renameTo: null
                  size: 162
                  wrapText: null
                  displayFormat: null
                - originalName: lng
                  renameTo: null
                  size: 83
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 7784dcec-f50e-46c2-b95d-9a9c4f936dfd
          cellLabel: "Pedidos de acolhimento: lat lng"
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: ab50d6e1-8f61-4cc2-9d9e-7fec411eaac3
                  xAxis:
                    type: string
                    style:
                      grid:
                        style: solid
                      ticks: {}
                      labels: {}
                  series:
                    - id: a5009f5b-267d-4bc8-a416-ae86bcab21f9
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: solid
                          ticks: {}
                          labels: {}
                        aggregate: sum
                      dataFrameColumns:
                        - lat
                      colorOrder: ascending
                      color:
                        type: static
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: auto
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_lat_lng
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result
            outputResult: false
            displayTableConfig: null
  - cellType: MAP
    cellId: 74c2d5b1-55cc-4007-a1d3-93a3414fdb4f # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: mapa
    config:
      height: 520
      map:
        theme: light
        layers:
          - id: 2dbdf358-7747-4252-bc29-ab795295ca1f
            data:
              coordinates:
                system: latlng_separate
                dataFrameColumn: lng
                dataFrameLatColumn: lat
                dataFrameLngColumn: lng
              dataFrameName: pedidos_de_acolhimento_lat_lng
            fill:
              type: static
              color:
                - 255
                - 166
                - 0
              opacity: 0.49
            type: scatter
            radius:
              type: static
              value: 14
            opacity: 1
            visible: true
            tooltipDataFrameColumns: []
        initialView:
          zoom: 3.063224493481961
          pitch: 0
          width: 457
          height: 427
          bearing: 0
          maxZoom: 20
          minZoom: 0
          altitude: 1.5
          latitude: -14.770644642338691
          maxPitch: 60
          minPitch: 0
          position:
            - 0
            - 0
            - 0
          longitude: -53.0987445468504
          normalize: true
        isLegendOpen: false
  - cellType: MARKDOWN
    cellId: 336b0f16-5bb0-42a2-b478-cc6d875091b9 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Pedidos de acolhimento: norte e nordeste"
    config:
      source: "#### Regiões norte e nordeste"
  - cellType: BLOCK
    cellId: 74d30b24-ef38-48f2-8255-ab84d8269fe5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: b53daa02-1ec8-4772-9eb6-0627275be618
        chartCellId: 80fd91ad-9a7d-4593-83a9-ad6acd5e0c66
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: b53daa02-1ec8-4772-9eb6-0627275be618
          cellLabel: "Pedidos de acolhimento: norte"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS capital,
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *
              FROM capitals
              WHERE "região" = 'norte'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_3
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ano
                  renameTo: null
                  size: 196
                  wrapText: null
                  displayFormat: null
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos de acolhimento por ano
                  renameTo: null
                  size: 228
                  wrapText: null
                  displayFormat: null
                - originalName: região
                  renameTo: null
                  size: 88
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 80fd91ad-9a7d-4593-83a9-ad6acd5e0c66
          cellLabel: norte
          config:
            height: null
            chartSpec:
              type: layered
              facet: {}
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - pedidos de acolhimento por ano
                      colorDataFrameColumn: capital
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          capital: "#ffa600"
                          não capital: "#fed6ab"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                      dataLabels:
                        angle: 0
                        color: "#3F4257"
                        fontSize: 10
                        position: outside-end
                      legendTitle: "   "
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_total_3
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ffa600"
              não capital: "#EECA3B"
            resultVariable: filter_result_43
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: ce520cff-3e9c-4a37-8854-b5d9edec59ea # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 8014c5eb-63d3-4d2e-a329-d9ab2401caef
        chartCellId: 94c42b02-da53-4686-a0da-dd44a1a80637
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 8014c5eb-63d3-4d2e-a329-d9ab2401caef
          cellLabel: "Pedidos de acolhimento: nordeste"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS capital,
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *
              FROM capitals
              WHERE "região" = 'nordeste'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_6
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 94c42b02-da53-4686-a0da-dd44a1a80637
          cellLabel: nordeste
          config:
            height: null
            chartSpec:
              type: layered
              facet: {}
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - pedidos de acolhimento por ano
                      colorDataFrameColumn: capital
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          capital: "#ffa600"
                          não capital: "#fed6ab"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                      dataLabels:
                        angle: 0
                        color: "#3F4257"
                        fontSize: 10
                        position: outside-end
                      legendTitle: "   "
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_total_6
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ffa600"
              não capital: "#EECA3B"
            resultVariable: filter_result_47
            outputResult: false
            displayTableConfig: null
  - cellType: SQL
    cellId: 5e51efa3-95ed-406a-9afd-ef3ae43ab1a0 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      source: |-
        WITH capitals AS (
            SELECT
                DATE_TRUNC('year', created_at) AS year,
                CASE
                    WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                    WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                    WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                    WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                    WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                    WHEN state = 'INT' THEN 'internacional'
                    ELSE 'não encontrado'
                END AS "região",
                CASE 
                    WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                    WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                    WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                    WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                    WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                    WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                    WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                    WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                    WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                    WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                    WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                    WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                    WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                    WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                    WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                    WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                    WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                    WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                    WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                    WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                    WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                    WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                    WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                    WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                    WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                    WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                    WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                    ELSE 'não capital'
                END AS capital,
                COUNT(*) AS support_request_per_year
            FROM match.support_requests
            WHERE status != 'duplicated'
            GROUP BY 1, 2, 3
        )
        SELECT
            *,
            SUM(support_request_per_year) OVER(PARTITION BY capital ORDER BY year)::INT AS cumulative_support_request_count
        FROM capitals
        WHERE "região" IN ('norte', 'nordeste')
      dataFrameCell: false
      dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
      resultVariableName: pedidos_de_acolhimento_total_4
      useRichDisplay: true
      sqlCellOutputType: PANDAS
      useQueryMode: false
      castDecimals: true
      useNativeDates: true
      outputFilteredResult: true
      allowDuplicateColumns: false
      tableDisplayConfig:
        pageSize: 50
        height: null
        hideIcons: false
        hideIndex: false
        defaultSortColumn: null
        defaultSortIndexColumn: null
        defaultSortDirection: ASC
        conditionalFormatting: null
        filters: null
        columnProperties:
          - originalName: capital
            renameTo: null
            size: 91
            wrapText: null
            displayFormat: null
          - originalName: cumulative_msr_count
            renameTo: null
            size: 177
            wrapText: null
            displayFormat: null
          - originalName: cumulative_support_request_count
            renameTo: null
            size: 247
            wrapText: null
            displayFormat: null
          - originalName: msr_per_year
            renameTo: null
            size: 128
            wrapText: null
            displayFormat: null
          - originalName: support_request_per_year
            renameTo: null
            size: 199
            wrapText: null
            displayFormat: null
          - originalName: year
            renameTo: null
            size: 214
            wrapText: null
            displayFormat: null
        columnOrdering: null
        pinnedColumns: null
        hiddenColumns: null
  - cellType: CHARTV2
    cellId: a9b09729-4004-4133-95b8-4ba1e6b4c568 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      height: null
      chartSpec:
        type: layered
        facet:
          facetVertical:
            type: string
            dataFrameColumn: região
        layers:
          - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
            xAxis:
              type: datetime
              style:
                max: 1735700400000
                min: 1514772000000
                grid:
                  style: dash
                ticks: {}
                labels: {}
              title: ano
              timeUnit: year
              dataFrameColumn: year
            series:
              - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                type: bar
                axis:
                  type: number
                  style:
                    grid:
                      style: dash
                    ticks:
                      count: 3
                    labels: {}
                  title: "   "
                  aggregate: sum
                dataFrameColumns:
                  - support_request_per_year
                colorDataFrameColumn: capital
                colorOrder: ascending
                color:
                  type: series
                  defaultColor: "#ffa600"
                  colorsBySeriesValues:
                    capital: "#ffa600"
                    não capital: "#ffeac4"
                opacity:
                  type: static
                  value: 0.6
                tooltip:
                  type: auto
                dataLabels:
                  angle: 0
                  color: "#3F4257"
                  fontSize: 10
                  position: outside-end
                legendTitle: "   "
                barWidth: 1
                orientation: vertical
                layout: grouped
            dataFrame: pedidos_de_acolhimento_total_4
        settings:
          legend:
            position: bottom
          tooltip: true
          selectionEnabled: false
      chartSelection: {}
      colorMappings: {}
      resultVariable: filter_result_45
      outputResult: false
      displayTableConfig: null
  - cellType: MARKDOWN
    cellId: d7931a8e-450e-45a2-a775-4a29bfee6a5d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Matches
    config:
      source: |-
        --------------
        # Matches
        Total de pedidos de acolhimento que receberam um match, considerando todos os tipos de match.
  - cellType: MARKDOWN
    cellId: 15cf8346-acf8-4198-9033-67ac7e863268 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Matches: Série histórica"
    config:
      source: "##### Série histórica"
  - cellType: BLOCK
    cellId: 7ffd6e4e-687e-412e-9088-ec1ba50d758b # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: ad110c7f-feb1-438a-867f-54a74489116c
        chartCellId: 510ac6d2-9ab0-4fc1-9f02-84e85a2c6146
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: ad110c7f-feb1-438a-867f-54a74489116c
          cellLabel: "Matches: cumulativo"
          config:
            source: |-
              WITH matches_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano",
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS "matches por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1
              ),
              cumulative_sums AS (
                  SELECT
                      *,
                      SUM("matches por ano") OVER(ORDER BY ano)::INT AS "total de matches",
                      SUM("pedidos de acolhimento por ano") OVER(ORDER BY ano)::INT AS "total de pedidos de acolhimento"
                  FROM matches_per_year

              )
              SELECT
                  *,
                  "total de matches"/"total de pedidos de acolhimento"::NUMERIC(10,4) AS porcentagem
              FROM cumulative_sums
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_total
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ?column?
                  renameTo: null
                  size: 106
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_match_count
                  renameTo: null
                  size: 191
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: support_requests_per_year
                  renameTo: null
                  size: 204
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 510ac6d2-9ab0-4fc1-9f02-84e85a2c6146
          cellLabel: cumulativo
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: d5444521-df70-4d96-83b1-cf2096a1c48b
                      name: pedidos de acolhimento
                      type: area
                      axis:
                        type: number
                        style:
                          max: 30000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total de pedidos de acolhimento
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.2
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                      line: false
                      point: false
                      normalize: false
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      name: matches
                      type: area
                      axis:
                        type: number
                        style:
                          max: 30000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total de matches
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ff7c43"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                      dataLabels:
                        angle: 45
                        fontSize: 10
                        position: above
                      line: true
                      point: true
                      normalize: false
                    - id: 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
                      name: "% de pedidos que receberam match"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 0.55
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                      dataLabels:
                        fontSize: 10
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                  dataFrame: matches_total
                  seriesGroups:
                    - - d5444521-df70-4d96-83b1-cf2096a1c48b
                      - 80616841-4fb3-4d01-8525-df2bab0f19a6
                    - - 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              "4365": "#4C78A8"
              "10146": "#4C78A8"
              "14838": "#4C78A8"
              "18154": "#4C78A8"
              "21022": "#4C78A8"
              "21163": "#4C78A8"
              "1546308000000": "#4C78A8"
              "1577847600000": "#4C78A8"
              "1609470000000": "#4C78A8"
              "1641006000000": "#4C78A8"
              "1672542000000": "#4C78A8"
              "1704078000000": "#4C78A8"
            resultVariable: filter_result_4
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 3282e6da-85c4-453f-8b5b-ddccc8b77dc2 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: d78b13e7-d70f-494e-8bdd-73e95f6f9deb
        chartCellId: c73f170d-39e8-4f66-8786-133cff896288
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: d78b13e7-d70f-494e-8bdd-73e95f6f9deb
          cellLabel: "Matches: por ano"
          config:
            source: |-
              WITH matches_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano",
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS "matches por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1
              )
              SELECT
                  *,
                  "matches por ano"/"pedidos de acolhimento por ano"::NUMERIC(10,4) AS porcentagem
              FROM matches_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_ano
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ?column?
                  renameTo: null
                  size: 106
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: support_requests_per_year
                  renameTo: null
                  size: 204
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: c73f170d-39e8-4f66-8786-133cff896288
          cellLabel: por ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: c702ece5-13f0-4de0-82ef-cb47f6b7a053
                      name: pedidos de acolhimento
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 8000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - pedidos de acolhimento por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.5
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      name: matches
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 8000
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - matches por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ff7c43"
                      opacity:
                        type: static
                        value: 0.7
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                      dataLabels:
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                    - id: 0e06aefa-c6fd-4152-8985-8b430dd262ed
                      name: "% de pedidos que receberam match"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 0.8
                          min: -1
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: ano
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                      dataLabels:
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                  dataFrame: matches_por_ano
                  seriesGroups:
                    - - c702ece5-13f0-4de0-82ef-cb47f6b7a053
                      - 80616841-4fb3-4d01-8525-df2bab0f19a6
                    - - 0e06aefa-c6fd-4152-8985-8b430dd262ed
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_8
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: d87facf9-fe4c-40d8-8a54-82b720df504d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: c5755ce5-d9ca-4537-a922-9a9298a5c49a
        chartCellId: 43e4c512-af02-466b-b2b0-a390ba46c3b5
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: c5755ce5-d9ca-4537-a922-9a9298a5c49a
          cellLabel: "Matches: por mês no último ano"
          config:
            source: |-
              WITH matches_per_month AS (
                  SELECT
                      DATE_TRUNC('month', created_at) AS "mês",
                      COUNT(*) AS "pedidos de acolhimento por mês",
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS "matches por mês"
                  FROM match.support_requests
                  WHERE 
                      created_at >= CURRENT_DATE - INTERVAL '1 YEAR'
                      AND status != 'duplicated'
                  GROUP BY 1
              )
              SELECT 
                  *,
                  "matches por mês"/"pedidos de acolhimento por mês"::NUMERIC(10,4) AS percentage
              FROM matches_per_month
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_mes
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 43e4c512-af02-466b-b2b0-a390ba46c3b5
          cellLabel: por mês no último ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: f4161324-1f31-49c8-a1ad-0f1a04b9b6ad
                  xAxis:
                    type: datetime
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: mês
                    timeUnit: yearmonth
                    dataFrameColumn: mês
                  series:
                    - id: 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      name: matches
                      type: line
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: dash
                          ticks:
                            count: 8
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - matches por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#ff7c43"
                      opacity:
                        type: static
                        value: 0.8
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: mês
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                      dataLabels:
                        fontSize: 10
                        position: above
                      point: true
                      stroke: solid
                      width: 2
                    - id: cbf171bd-c443-496f-b4c2-1e4a8d6a7a8e
                      name: pedidos de acolhimento
                      type: line
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: dash
                          ticks:
                            count: 8
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - pedidos de acolhimento por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: mês
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                      point: true
                      stroke: solid
                      width: 2
                    - id: 6ed881c8-b941-4b7a-98aa-e72bdaeeb90e
                      name: "% de pedidos que receberam match"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 1
                          min: -1
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - percentage
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: datetime
                            dataFrameColumn: mês
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                      dataLabels:
                        fontSize: 8
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                  dataFrame: matches_por_mes
                  seriesGroups:
                    - - 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      - cbf171bd-c443-496f-b4c2-1e4a8d6a7a8e
                    - - 6ed881c8-b941-4b7a-98aa-e72bdaeeb90e
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_5
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 76ed1a7e-4871-411b-adf4-1e1f9d5a2db5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Matches: Por território"
    config:
      source: "##### Por território"
  - cellType: INPUT
    cellId: 9c0f378c-4506-441a-9260-281715116532 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Filtro de tempo para os dados de território
    config:
      inputType: DROPDOWN
      name: match_time_filter
      outputType: STRING
      options:
        valueOptions:
          - Ver dados apenas dos últimos 12 meses
          - Ver dados desde o início do Mapa
      defaultValue: Ver dados apenas dos últimos 12 meses
  - cellType: BLOCK
    cellId: 7f28b0d6-27f7-4851-8047-f21babf3562a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 8c403bb3-e109-4e5d-bd9f-e51e8ab07033
        chartCellId: fde3bb0e-07e5-4c61-9d2d-e74159e15825
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 8c403bb3-e109-4e5d-bd9f-e51e8ab07033
          cellLabel: "Matches: estados"
          config:
            source: |
              WITH matches_per_state AS (
                  SELECT
                      state AS estado,
                      CASE WHEN status = 'matched' THEN 'matches' ELSE 'pedidos de acolhimento sem match' END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests
                  WHERE 
                      status != 'duplicated'
                      AND state NOT IN ('not_found', 'INT')
                      AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1, 2
              )
              SELECT
                  estado,
                  categoria,
                  total
              FROM matches_per_state
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_estado_4
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: count
                  renameTo: null
                  size: 85
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 104
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: state
                  renameTo: null
                  size: 82
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_count
                  renameTo: null
                  size: 182
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: fde3bb0e-07e5-4c61-9d2d-e74159e15825
          cellLabel: estados
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e6ed243e-00e3-4439-9d5e-b6ab3f57213b
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "     "
                    dataFrameColumn: estado
                  series:
                    - id: 8e2d44ac-b336-4aa9-90dd-0981a7f73d58
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 2
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ff7c43"
                        colorsBySeriesValues:
                          matches: "#ff7c43"
                          pedidos de acolhimento: "#CFD3DE"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      legendTitle: "    "
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: matches_por_estado_4
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              matched: "#ff7c43"
              matches: "#ff7c43"
              not_matched: "#CFD3DE"
              pedidos de acolhimento: "#CFD3DE"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_44
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: f76f97e4-7b75-43f6-b81e-e6096e9183bb # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: cb36e99f-eccc-4087-b583-8fbfa2230d8c
        chartCellId: ef9d7b4a-3e82-4bbc-9007-ab4155a5bc30
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: cb36e99f-eccc-4087-b583-8fbfa2230d8c
          cellLabel: Matches - % de matches por estado
          config:
            source: |
              WITH matches_per_state AS (
                  SELECT
                      state AS estado,
                      COUNT(*) AS "pedidos de acolhimento por estado",
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS "matches por estado"
                  FROM match.support_requests
                  WHERE 
                      status != 'duplicated'
                      AND state NOT IN ('not_found', 'INT')
                      AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT
                  estado,
                  "matches por estado"/"pedidos de acolhimento por estado"::NUMERIC(10,4) AS porcentagem
              FROM matches_per_state
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_estado_4
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: count
                  renameTo: null
                  size: 85
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 104
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: state
                  renameTo: null
                  size: 82
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_count
                  renameTo: null
                  size: 182
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: ef9d7b4a-3e82-4bbc-9007-ab4155a5bc30
          cellLabel: Matches - % de matches por estado
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e6ed243e-00e3-4439-9d5e-b6ab3f57213b
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "     "
                    dataFrameColumn: estado
                  series:
                    - id: 8e2d44ac-b336-4aa9-90dd-0981a7f73d58
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_por_estado_4
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              matched: "#ff7c43"
              not_matched: "#CFD3DE"
            resultVariable: filter_result_18
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: ce6002ef-b214-4b19-9fcd-8ab8c9671934 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: f51126e1-9a1b-4cab-b393-8a27082cbf59
        chartCellId: 66fbbf42-dce7-41a0-84c1-f9daf8e15b4c
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: f51126e1-9a1b-4cab-b393-8a27082cbf59
          cellLabel: "Matches: regiões"
          config:
            source: |-
              SELECT
                  CASE
                      WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                      WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                      WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                      WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                      WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                      WHEN state = 'INT' THEN 'internacional'
                      ELSE 'não encontrado'
                  END AS "região",
                  CASE WHEN status = 'matched' THEN 'matches' ELSE 'pedidos de acolhimento sem match' END AS categoria,
                  COUNT(*) AS total
              FROM match.support_requests
              WHERE 
                  status != 'duplicated'
                  AND state NOT IN ('INT', 'not_found')
                  AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              GROUP BY 1, 2
              ORDER BY 2 DESC
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_3
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 66fbbf42-dce7-41a0-84c1-f9daf8e15b4c
          cellLabel: regiões
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: região
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ff7c43"
                        colorsBySeriesValues:
                          matches: "#ff7c43"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      legendTitle: "    "
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_por_regiao_3
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              matches: "#ff7c43"
              pedidos de acolhimento: "#CFD3DE"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_20
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 3411c30a-b1cf-4f75-a5a6-4a83eced8196 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 85162751-d5fb-4e48-b9f2-1fd4aab3a365
        chartCellId: 2f7b070f-9500-41e8-a1f7-3a56d5e8bfd1
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 85162751-d5fb-4e48-b9f2-1fd4aab3a365
          cellLabel: Matches - % de matches por região
          config:
            source: |
              WITH matches_per_region AS (
                  SELECT
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      COUNT(*) AS "pedidos de acolhimento por região",
                      SUM(CASE WHEN status='matched' THEN 1 ELSE 0 END) AS "matches por região"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  AND state NOT IN ('INT', 'not_found')
                  AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT 
                  *,
                  "matches por região"/"pedidos de acolhimento por região"::NUMERIC(10,4) AS porcentagem
              FROM matches_per_region
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_7
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_state
                  renameTo: null
                  size: 158
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 2f7b070f-9500-41e8-a1f7-3a56d5e8bfd1
          cellLabel: "% de matches"
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels:
                        angle: 0
                    title: "   "
                    dataFrameColumn: região
                  series:
                    - id: 77975e42-03bc-47e9-a489-b73ba489a4f6
                      name: porcentagem de matches
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          min: 0
                          ticks:
                            count: 5
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      tooltip:
                        type: auto
                      dataLabels:
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_regiao_7
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              "0.566304347826087": "#003f5c"
              "0.5415194346289753": "#003f5c"
              "0.5419605077574048": "#003f5c"
              "0.41262848751835535": "#003f5c"
              "0.46772358340286735": "#003f5c"
            resultVariable: filter_result_25
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 056b96fb-2d25-44c2-941a-c7f7bc99535e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 95611aa9-f668-4c91-be28-2593a0c275eb
        chartCellId: 10883f9a-5dbf-424e-a33f-a102a6ecb245
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 95611aa9-f668-4c91-be28-2593a0c275eb
          cellLabel: "Matches: capital x não capital"
          config:
            source: |-
              WITH support_request_capital AS (
                  SELECT
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                      ELSE 'não capital'
                      END AS capital,
                      CASE WHEN status = 'matched' THEN 'matches' ELSE 'pedidos de acolhimento sem match' END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests
                  WHERE 
                      status != 'duplicated'
                      AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1, 2
              )
              SELECT 
                  *
              FROM support_request_capital
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_5
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: concat
                  renameTo: null
                  size: 231
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 161
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 10883f9a-5dbf-424e-a33f-a102a6ecb245
          cellLabel: capital x não capital
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: ascending
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: capital
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ff7c43"
                        colorsBySeriesValues:
                          matches: "#ff7c43"
                          pedidos de acolhimento: "#CFD3DE"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_por_regiao_5
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matches: "#ff7c43"
              não capital: "#ffd9c6"
              capital - matches: "#ff7c43"
              não capital - matches: "#ff7c43"
              pedidos de acolhimento: "#CFD3DE"
              capital - pedidos de acolhimento: "#CFD3DE"
              pedidos de acolhimento sem match: "#CFD3DE"
              não capital - pedidos de acolhimento: "#CFD3DE"
            resultVariable: filter_result_22
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 156ec4e7-720b-421c-942f-172c818dea4a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 5fbf364b-8b56-4ec5-a262-7228fb8bef88
        chartCellId: fbf21fd7-28e2-47ba-bb93-2b8115003e6e
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 5fbf364b-8b56-4ec5-a262-7228fb8bef88
          cellLabel: Matches - % de matches capital x não capital
          config:
            source: |-
              WITH matches_per_capital AS (
              SELECT
                  CASE 
                      WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                      WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                      WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                      WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                      WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                      WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                      WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                      WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                      WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                      WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                      WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                      WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                      WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                      WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                      WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                      WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                      WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                      WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                      WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                      WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                      WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                      WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                      WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                      WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                      WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                      WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                      WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                     ELSE 'não capital'
                  END AS capital,
                  COUNT(*) AS "pedidos de acolhimento por capital",
                  SUM(CASE WHEN status='matched' THEN 1 ELSE 0 END) AS "matches por capital"
              FROM match.support_requests
              WHERE 
                  status != 'duplicated'
                  AND state NOT IN ('INT', 'not_found')
                  AND created_at >= CASE WHEN {{ match_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              GROUP BY 1
              )
              SELECT
                  capital,
                  "matches por capital"/"pedidos de acolhimento por capital"::NUMERIC(10,4) AS porcentagem
              FROM matches_per_capital
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_6
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ?column?
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: fbf21fd7-28e2-47ba-bb93-2b8115003e6e
          cellLabel: "% de matches"
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: capital
                  series:
                    - id: cdb91bb6-1d73-47c0-9541-9ba68c72a387
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        color: "#003f5c"
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_regiao_6
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#003f5c"
              não capital: "#9cc3dc"
            resultVariable: filter_result_23
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 69f483f0-8c46-4ba1-8fd0-900d121b4d7a # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Matches: Regiões norte e nordeste"
    config:
      source: "#### Regiões norte e nordeste"
  - cellType: BLOCK
    cellId: 84745e5e-47b4-4806-bfca-b9e6d7afe4d4 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 5c08794a-9b10-4707-a57b-d218c8e7e9c6
        chartCellId: ffe272c3-1dcf-4bd1-a352-5e230baad5ba
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 5c08794a-9b10-4707-a57b-d218c8e7e9c6
          cellLabel: "Matches: norte"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS year,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      CASE WHEN status = 'matched' THEN 'matches' ELSE 'pedidos de acolhimento sem match' END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3, 4
              )
              SELECT
                  *
              FROM capitals
              WHERE "região"= 'norte'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_5
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: ffe272c3-1dcf-4bd1-a352-5e230baad5ba
          cellLabel: norte
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  sort: ascending
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: year
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          matches: "#ff7c43"
                          pedidos de acolhimento: "#CFD3DE"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_5
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matches: "#ff7c43"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#CFD3DE"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_46
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: f6462c03-948c-425f-a9d8-d47593b286b7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: f3af0832-89ba-460f-8456-f9bfad9b3a3f
        chartCellId: 9dd2c751-cfd3-4eef-81aa-5d04ff2f692b
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: f3af0832-89ba-460f-8456-f9bfad9b3a3f
          cellLabel: norte - % de matches
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      COUNT(*) AS support_request_per_year,
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS matches_per_year
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *,
                  matches_per_year/support_request_per_year::NUMERIC(10,4) AS percentage
              FROM capitals
              WHERE "região"= 'norte'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_8
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 161
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: região
                  renameTo: null
                  size: 88
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 9dd2c751-cfd3-4eef-81aa-5d04ff2f692b
          cellLabel: norte - % de matches
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - percentage
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_8
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matches: "#ff7c43"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#CFD3DE"
            resultVariable: filter_result_49
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 32a3ff24-fa43-46e9-9020-db900d27b566 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: dc0ea240-0099-4a25-b308-ad6e08a0d980
        chartCellId: 5f5c476a-6893-4624-b46d-946b6951ae07
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: dc0ea240-0099-4a25-b308-ad6e08a0d980
          cellLabel: "Matches: nordeste"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS year,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      CASE WHEN status = 'matched' THEN 'matches' ELSE 'pedidos de acolhimento sem match' END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3, 4
              )
              SELECT
                  *
              FROM capitals
              WHERE "região"= 'nordeste'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_14
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 5f5c476a-6893-4624-b46d-946b6951ae07
          cellLabel: nordeste
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  sort: ascending
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: year
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          matches: "#ff7c43"
                          pedidos de acolhimento: "#CFD3DE"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_14
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matches: "#ff7c43"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#CFD3DE"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_55
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: fa4169b1-566f-498d-8606-1607a3aee970 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 03bdb911-14e7-4b77-bb5d-77bb2e8c9507
        chartCellId: a00bf97e-6a89-45ce-bff5-b475ff3242da
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 03bdb911-14e7-4b77-bb5d-77bb2e8c9507
          cellLabel: nordeste - % de matches
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      COUNT(*) AS "pedidos de acolhimento por ano",
                      SUM(CASE WHEN status = 'matched' THEN 1 ELSE 0 END) AS "matches por ano"
                  FROM match.support_requests
                  WHERE status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *,
                  "matches por ano"/"pedidos de acolhimento por ano"::NUMERIC(10,4) AS porcentagem
              FROM capitals
              WHERE "região"= 'nordeste'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_9
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 161
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: região
                  renameTo: null
                  size: 88
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: a00bf97e-6a89-45ce-bff5-b475ff3242da
          cellLabel: nordeste - % de matches
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_9
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_50
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: af23a142-2a9c-45fe-90a9-1af961cf95a5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Atendimentos realizados
    config:
      source: |-
        -------------------
        # Atendimentos realizados
        Total de matches que iniciaram o atendimento.
  - cellType: MARKDOWN
    cellId: 8e3e4fe2-1518-48bc-94ee-cdfeb13d25f2 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Atendimentos realizados: Série histórica"
    config:
      source: "##### Série histórica"
  - cellType: BLOCK
    cellId: 5f9e5f6b-7d0a-4ae5-8ebe-65e3f8d6e740 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: f37b0e87-7d59-4e25-9a5d-a0cf3e75a6a7
        chartCellId: e29c9628-b84d-4471-a342-6db06e9835ee
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: f37b0e87-7d59-4e25-9a5d-a0cf3e75a6a7
          cellLabel: "Atendimentos realizados: cumulativo"
          config:
            source: |-
              WITH atendimentos_per_year AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano",
                      SUM(CASE WHEN s.status = 'matched' THEN 1 ELSE 0 END) AS "matches por ano",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por ano"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1
              ),
              cumulative_sums AS (
                  SELECT
                      *,
                      SUM("atendimentos por ano") OVER(ORDER BY ano)::INT AS "total de atendimentos",
                      SUM("matches por ano") OVER(ORDER BY ano)::INT AS "total de matches",
                      SUM("pedidos de acolhimento por ano") OVER(ORDER BY ano)::INT AS "total de pedidos de acolhimento",
                      50000 AS meta
                  FROM atendimentos_per_year

              )
              SELECT
                  *,
                  "total de atendimentos"/"total de pedidos de acolhimento"::NUMERIC(10,4) AS porcentagem
              FROM cumulative_sums
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_total_3
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ?column?
                  renameTo: null
                  size: 106
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_match_count
                  renameTo: null
                  size: 191
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: support_requests_per_year
                  renameTo: null
                  size: 204
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: e29c9628-b84d-4471-a342-6db06e9835ee
          cellLabel: cumulativo
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: d5444521-df70-4d96-83b1-cf2096a1c48b
                      name: pedidos de acolhimento
                      type: area
                      axis:
                        type: number
                        style:
                          max: 55000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total de pedidos de acolhimento
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.2
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                          - type: number
                            dataFrameColumn: total de atendimentos
                      line: false
                      point: false
                      normalize: false
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      name: matches
                      type: area
                      axis:
                        type: number
                        style:
                          max: 55000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total de matches
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#9CA3B4"
                      opacity:
                        type: static
                        value: 0.2
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                          - type: number
                            dataFrameColumn: total de atendimentos
                      line: false
                      point: false
                      normalize: false
                    - id: 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
                      name: "% de pedidos que realizaram atendimento"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 0.2
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                          - type: number
                            dataFrameColumn: total de atendimentos
                      dataLabels:
                        fontSize: 10
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                    - id: e75970ce-6e95-40dc-a497-f6abadcc5ad3
                      name: atendimentos
                      type: area
                      axis:
                        type: number
                        style:
                          max: 55000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total de atendimentos
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#f95d6a"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                          - type: number
                            dataFrameColumn: total de atendimentos
                      dataLabels:
                        angle: 45
                        position: above
                      line: true
                      point: true
                      normalize: false
                    - id: 5a4c1a1d-b1ff-45eb-b072-c717238b387a
                      name: meta
                      type: line
                      axis:
                        type: number
                        style:
                          max: 55000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - meta
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#111418"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total de pedidos de acolhimento
                          - type: number
                            dataFrameColumn: total de matches
                          - type: number
                            dataFrameColumn: total de atendimentos
                      dataLabels:
                        angle: 45
                        fontSize: 10
                        position: above
                      point: false
                      stroke: dashed
                      width: 2
                  dataFrame: matches_total_3
                  seriesGroups:
                    - - d5444521-df70-4d96-83b1-cf2096a1c48b
                      - 80616841-4fb3-4d01-8525-df2bab0f19a6
                      - e75970ce-6e95-40dc-a497-f6abadcc5ad3
                      - 5a4c1a1d-b1ff-45eb-b072-c717238b387a
                    - - 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_33
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 690dab5d-2c65-4cfe-982d-da7053f07c49 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 6b8f964a-100f-4838-b781-400664fbd914
        chartCellId: 2b5f4331-e10b-410c-915f-dfeb63c52f13
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 6b8f964a-100f-4838-b781-400664fbd914
          cellLabel: "Atendimentos realizados: por ano"
          config:
            source: |-
              WITH atendimentos_per_year AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      COUNT(*) AS "pedidos de acolhimento por ano",
                      SUM(CASE WHEN s.status = 'matched' THEN 1 ELSE 0 END) AS "matches por ano",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por ano"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1
              )
              SELECT
                  *,
                  "atendimentos por ano"/"pedidos de acolhimento por ano"::NUMERIC(10,4) AS porcentagem
              FROM atendimentos_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_total_4
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: ?column?
                  renameTo: null
                  size: 106
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_match_count
                  renameTo: null
                  size: 191
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: matches_per_year
                  renameTo: null
                  size: 155
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: support_requests_per_year
                  renameTo: null
                  size: 204
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 2b5f4331-e10b-410c-915f-dfeb63c52f13
          cellLabel: por ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: d5444521-df70-4d96-83b1-cf2096a1c48b
                      name: pedidos de acolhimento
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 8000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - pedidos de acolhimento por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.4
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                          - type: number
                            dataFrameColumn: atendimentos por ano
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      name: matches
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 8000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - matches por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#9CA3B4"
                      opacity:
                        type: static
                        value: 0.3
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                          - type: number
                            dataFrameColumn: atendimentos por ano
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                    - id: 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
                      name: "% de pedidos que realizaram atendimento"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 0.2
                          min: -0.5
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                          - type: number
                            dataFrameColumn: atendimentos por ano
                      dataLabels:
                        fontSize: 10
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                    - id: e75970ce-6e95-40dc-a497-f6abadcc5ad3
                      name: atendimentos
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 8000
                          min: 0
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - atendimentos por ano
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#f95d6a"
                      opacity:
                        type: static
                        value: 0.7
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por ano
                          - type: number
                            dataFrameColumn: matches por ano
                          - type: number
                            dataFrameColumn: atendimentos por ano
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: matches_total_4
                  seriesGroups:
                    - - d5444521-df70-4d96-83b1-cf2096a1c48b
                      - 80616841-4fb3-4d01-8525-df2bab0f19a6
                      - e75970ce-6e95-40dc-a497-f6abadcc5ad3
                    - - 4b25e076-8eec-4e6c-9c90-2545ce0f0a59
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_34
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: f0527799-be13-4791-bcce-fccd1a56be18 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 09e3a1d8-52a8-4971-8631-9edfa55b4b4c
        chartCellId: eeb1f7c9-6a52-45cc-bb7a-7b0f78dd1ec3
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 09e3a1d8-52a8-4971-8631-9edfa55b4b4c
          cellLabel: "Atendimentos realizados: por mês no último ano"
          config:
            source: |-
              WITH atendimentos_per_month AS (
                  SELECT
                      DATE_TRUNC('month', s.created_at) AS "mês",
                      COUNT(*) AS "pedidos de acolhimento por mês",
                      SUM(CASE WHEN s.status = 'matched' THEN 1 ELSE 0 END) AS "matches por mês",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por mês"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE 
                      s.status != 'duplicated'
                      AND s.created_at >= CURRENT_DATE - INTERVAL '1 YEAR'
                  GROUP BY 1
              )
              SELECT
                  *,
                  "atendimentos por mês"/"pedidos de acolhimento por mês"::NUMERIC(10,4) AS percentage
              FROM atendimentos_per_month
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_mes_2
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: eeb1f7c9-6a52-45cc-bb7a-7b0f78dd1ec3
          cellLabel: por mês no último ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: f4161324-1f31-49c8-a1ad-0f1a04b9b6ad
                  xAxis:
                    type: datetime
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "    "
                    dataFrameColumn: mês
                  series:
                    - id: cbf171bd-c443-496f-b4c2-1e4a8d6a7a8e
                      name: pedidos de acolhimento
                      type: line
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: dash
                          ticks:
                            count: 8
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - pedidos de acolhimento por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#CFD3DE"
                      opacity:
                        type: static
                        value: 0.6
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                          - type: number
                            dataFrameColumn: atendimentos por mês
                      point: false
                      stroke: solid
                      width: 2
                    - id: 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      name: matches
                      type: line
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: dash
                          ticks:
                            count: 8
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - matches por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#9CA3B4"
                      opacity:
                        type: static
                        value: 0.8
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                          - type: number
                            dataFrameColumn: atendimentos por mês
                      point: false
                      stroke: solid
                      width: 2
                    - id: 6ed881c8-b941-4b7a-98aa-e72bdaeeb90e
                      name: "% de pedidos que realizaram atendimento"
                      type: scatter
                      axis:
                        type: number
                        style:
                          max: 0.2
                          min: -1
                          ticks:
                            count: 0
                          labels: {}
                        title: "   "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - percentage
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                          - type: number
                            dataFrameColumn: atendimentos por mês
                      dataLabels:
                        fontSize: 8
                        position: above
                      filled: true
                      shape: triangle-down
                      size: 10
                    - id: d1e18955-713d-4748-993b-44f9416e07b9
                      name: atendimentos
                      type: line
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: dash
                          ticks:
                            count: 8
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - atendimentos por mês
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#f95d6a"
                      opacity:
                        type: static
                        value: 1
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: pedidos de acolhimento por mês
                          - type: number
                            dataFrameColumn: matches por mês
                          - type: number
                            dataFrameColumn: atendimentos por mês
                      dataLabels:
                        fontSize: 10
                        position: above
                      point: true
                      stroke: solid
                  dataFrame: matches_por_mes_2
                  seriesGroups:
                    - - cbf171bd-c443-496f-b4c2-1e4a8d6a7a8e
                      - 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      - d1e18955-713d-4748-993b-44f9416e07b9
                    - - 6ed881c8-b941-4b7a-98aa-e72bdaeeb90e
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_35
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: f779663e-8844-4d0a-840f-96a33e168128 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Atendimentos realizados: Por território"
    config:
      source: "##### Por território"
  - cellType: INPUT
    cellId: 883af184-1ef5-47d7-be40-4dfc2708cd6b # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Filtro de tempo para os dados de território
    config:
      inputType: DROPDOWN
      name: atendimentos_time_filter
      outputType: STRING
      options:
        valueOptions:
          - Ver dados apenas dos últimos 12 meses
          - Ver dados desde o início do Mapa
      defaultValue: Ver dados apenas dos últimos 12 meses
  - cellType: BLOCK
    cellId: 8db6714e-26e3-4d31-911e-2cc29426ade6 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 4137f418-8623-4832-8b50-4a07d393cb78
        chartCellId: 64ed76a6-d14a-4bf4-9ae0-dd72c2a95074
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 4137f418-8623-4832-8b50-4a07d393cb78
          cellLabel: "Atendimentos realizados: estados"
          config:
            source: |
              WITH atendimentos_per_state AS (
                  SELECT
                      state AS estado,
                      CASE 
                          WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 'atendimentos' 
                          WHEN s.status = 'matched' THEN 'matches sem atendimento'
                          ELSE 'pedidos de acolhimento sem match' 
                      END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE 
                      s.status != 'duplicated'
                      AND state NOT IN ('not_found', 'INT')
                      AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1, 2
              )
              SELECT
                  *
              FROM atendimentos_per_state
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_estado_2
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: count
                  renameTo: null
                  size: 85
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 104
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: state
                  renameTo: null
                  size: 82
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_count
                  renameTo: null
                  size: 182
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 64ed76a6-d14a-4bf4-9ae0-dd72c2a95074
          cellLabel: estados
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e6ed243e-00e3-4439-9d5e-b6ab3f57213b
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "     "
                    dataFrameColumn: estado
                  series:
                    - id: 8e2d44ac-b336-4aa9-90dd-0981a7f73d58
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        numberFormat:
                          format: NUMBER
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#f95d6a"
                        colorsBySeriesValues:
                          atendimentos: "#f95d6a"
                          matches sem atendimento: "#9CA3B4"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          atendimentos: 0.8
                          matches sem atendimento: 0.5
                          pedidos de acolhimento sem match: 0.5
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      legendTitle: "     "
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: matches_por_estado_2
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              matched: "#9CA3B4"
              atendimentos: "#f95d6a"
              pedidos de acolhimento: "#CFD3DE"
              matches sem atendimento: "#9CA3B4"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_36
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 8b1da2fd-0e2c-4f99-a84e-d3938717e664 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 31fd4c39-30b5-46ce-b7e7-a3379537685f
        chartCellId: b6427add-eed8-4abd-9dec-a648d1dd9a05
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 31fd4c39-30b5-46ce-b7e7-a3379537685f
          cellLabel: Atendimento realizados - % de atendimentos por estado
          config:
            source: |
              WITH atendimentos_per_state AS (
                  SELECT
                      state AS estado,
                      COUNT(*) AS "pedidos de acolhimento por estado",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por estado"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE 
                      s.status != 'duplicated'
                      AND state NOT IN ('not_found', 'INT')
                      AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT
                  estado,
                  "atendimentos por estado"/"pedidos de acolhimento por estado"::NUMERIC(10,4) AS porcentagem
              FROM atendimentos_per_state
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: matches_por_estado_3
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: count
                  renameTo: null
                  size: 85
                  wrapText: null
                  displayFormat: null
                - originalName: matched
                  renameTo: null
                  size: 104
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 164
                  wrapText: null
                  displayFormat: null
                - originalName: state
                  renameTo: null
                  size: 82
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_count
                  renameTo: null
                  size: 182
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: b6427add-eed8-4abd-9dec-a648d1dd9a05
          cellLabel: "% de atendimentos"
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: e6ed243e-00e3-4439-9d5e-b6ab3f57213b
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "     "
                    dataFrameColumn: estado
                  series:
                    - id: 8e2d44ac-b336-4aa9-90dd-0981a7f73d58
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: matches_por_estado_3
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_37
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 7fd883fd-cb79-434d-8d18-460c960f9118 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 9810162e-9c26-49c0-a160-816b4dd9ad10
        chartCellId: 8c78f3fd-b2f6-4119-a8da-63004da54fbe
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 9810162e-9c26-49c0-a160-816b4dd9ad10
          cellLabel: "Atendimentos realizados: regiões"
          config:
            source: |-
              SELECT
                  CASE
                      WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                      WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                      WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                      WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                      WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                      WHEN state = 'INT' THEN 'internacional'
                      ELSE 'não encontrado'
                  END AS "região",
                  CASE 
                      WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 'atendimentos' 
                      WHEN s.status = 'matched' THEN 'matched'
                      ELSE 'pedidos de acolhimento' 
                  END AS categoria,
                  COUNT(*) AS total
              FROM match.support_requests s
              LEFT JOIN match.matches m USING (support_request_id)
              WHERE 
                  state NOT IN ('INT', 'not_found')
                  AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              GROUP BY 1, 2
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_9
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 8c78f3fd-b2f6-4119-a8da-63004da54fbe
          cellLabel: regiões
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: região
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#f95d6a"
                        colorsBySeriesValues:
                          matched: "#9CA3B4"
                          atendimentos: "#f95d6a"
                          pedidos de acolhimento: "#CFD3DE"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          matched: 0.5
                          atendimentos: 0.8
                          pedidos de acolhimento: 0.5
                      tooltip:
                        type: auto
                      legendTitle: "     "
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_por_regiao_9
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              matched: "#9CA3B4"
              atendimentos: "#f95d6a"
              pedidos de acolhimento: "#CFD3DE"
            resultVariable: filter_result_38
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 2b7a3790-8a47-4eba-bfde-189013651694 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 9367b08d-fb93-4b28-b212-a174804f5aa2
        chartCellId: 0f239949-07f2-4aed-b692-78780a3e06a7
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 9367b08d-fb93-4b28-b212-a174804f5aa2
          cellLabel: "Atendimentos realizados: % de atendimentos por região"
          config:
            source: |-
              WITH atendimentos_per_region AS (
                  SELECT
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      COUNT(*) AS "pedidos de acolhimento por estado",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por estado"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE 
                      s.status != 'duplicated'
                      AND state NOT IN ('INT', 'not_found')
                      AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT 
                  *,
                  "atendimentos por estado"/"pedidos de acolhimento por estado"::NUMERIC(10,4) AS porcentagem
              FROM atendimentos_per_region
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_10
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 0f239949-07f2-4aed-b692-78780a3e06a7
          cellLabel: "% de atendimentos"
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: -x
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: região
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_regiao_10
              settings:
                legend:
                  position: top
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_39
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 8aa14a8b-7ea5-4771-8e79-d48f5dadf055 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 37eda986-d7f8-4a2d-aad2-87dfdd950a4f
        chartCellId: 48cd3a8d-c9ab-4fc5-844a-246b3d4fd899
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 37eda986-d7f8-4a2d-aad2-87dfdd950a4f
          cellLabel: "Atendimentos realizados: capital x não capital"
          config:
            source: |-
              SELECT
                  CASE 
                      WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                      WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                      WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                      WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                      WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                      WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                      WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                      WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                      WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                      WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                      WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                      WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                      WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                      WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                      WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                      WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                      WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                      WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                      WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                      WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                      WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                      WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                      WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                      WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                      WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                      WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                      WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                     ELSE 'não capital'
                  END AS capital,
                  CASE 
                      WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 'atendimentos' 
                      WHEN s.status = 'matched' THEN 'matches sem atendimento'
                      ELSE 'pedidos de acolhimento sem match' 
                  END AS categoria,
                  COUNT(*) AS total
              FROM match.support_requests s
              LEFT JOIN match.matches m USING (support_request_id)
              WHERE 
                  s.status != 'duplicated'
                  AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
              GROUP BY 1, 2
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_11
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 48cd3a8d-c9ab-4fc5-844a-246b3d4fd899
          cellLabel: capital x não capital
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: ascending
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: capital
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          atendimentos: "#f95d6a"
                          matches sem atendimento: "#9CA3B4"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          atendimentos: 0.8
                          matches sem atendimento: 0.5
                          pedidos de acolhimento sem match: 0.5
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      barWidth: 1
                      orientation: horizontal
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_por_regiao_11
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#f95d6a"
              matched: "#ffa600"
              atendimentos: "#f95d6a"
              não capital: "#ffd6d5"
              pedidos de acolhimento: "#ffa600"
              matches sem atendimento: "#9CA3B4"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_40
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 4c1ad72c-2b58-4c0f-8539-d08527159367 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 0c5eb9b6-5d46-41b0-933a-f415459d02e0
        chartCellId: bb9d17de-cd2b-437e-9732-eeb9875c09bd
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 0c5eb9b6-5d46-41b0-933a-f415459d02e0
          cellLabel: "Atendimentos realizado: % de atendimentos capital x não capital"
          config:
            source: |-
              WITH atendimentos_capital AS (
                  SELECT
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                      ELSE 'não capital'
                      END AS capital,
                      COUNT(*) AS "pedidos de acolhimento",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS atendimentos
                  FROM match.support_requests s
                  LEFT JOIN match.matches m USING (support_request_id)
                  WHERE 
                      s.status != 'duplicated'
                      AND s.created_at >= CASE WHEN {{ atendimentos_time_filter }} = 'Ver dados apenas dos últimos 12 meses' THEN CURRENT_DATE - INTERVAL '1 YEAR' ELSE '2010-01-01' END
                  GROUP BY 1
              )
              SELECT 
                  *,
                  atendimentos/"pedidos de acolhimento"::NUMERIC(10,4) AS porcentagem
              FROM atendimentos_capital
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_por_regiao_12
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: pedidos_de_acolhimento_per_state
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: region
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: bb9d17de-cd2b-437e-9732-eeb9875c09bd
          cellLabel: "% de atendimentos"
          config:
            height: 540
            chartSpec:
              type: layered
              layers:
                - id: 95f13c33-fbb3-4c3a-aa26-37f46edb6d69
                  xAxis:
                    sort: ascending
                    type: string
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: "   "
                    dataFrameColumn: capital
                  series:
                    - id: 869bd0ad-ff24-4857-9461-8bea4192132b
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - porcentagem
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.5
                      dataLabels:
                        color: "#003f5c"
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: horizontal
                      layout: grouped
                  dataFrame: pedidos_de_acolhimento_por_regiao_12
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#003f5c"
              não capital: "#9cc3dc"
            resultVariable: filter_result_41
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 2da72370-3165-40dc-9070-97db4d122c1d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: "Atendimentos realizados: regiões norte e nordeste"
    config:
      source: "##### Regiões norte e nordeste"
  - cellType: BLOCK
    cellId: 816c56b1-2012-4920-b397-bab981449b08 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 64b63ea9-e9df-4b7e-9b94-8fdb57413d69
        chartCellId: a63b7873-3f0f-468f-bdd9-11522179e0d2
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 64b63ea9-e9df-4b7e-9b94-8fdb57413d69
          cellLabel: "Atendimentos realizados: norte"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      CASE 
                          WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 'atendimentos' 
                          WHEN s.status = 'matched' THEN 'matches sem atendimento'
                          ELSE 'pedidos de acolhimento sem match' 
                      END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests s
                  LEFT JOIN match.matches m  USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1, 2, 3, 4
              )
              SELECT
                  *
              FROM capitals
              WHERE "região"= 'norte'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_10
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: a63b7873-3f0f-468f-bdd9-11522179e0d2
          cellLabel: norte
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  sort: ascending
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          atendimentos: "#f95d6a"
                          matches sem atendimento: "#9CA3B4"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          atendimentos: 0.8
                          matches sem atendimento: 0.5
                          pedidos de acolhimento sem match: 0.5
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      legendTitle: "   "
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_10
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matched: "#ffa600"
              matches: "#ff7c43"
              atendimentos: "#f95d6a"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#ffa600"
              matches sem atendimento: "#9CA3B4"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_51
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: e1ea5c0d-7373-4373-930d-a66577497d72 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 780c5898-c991-4252-9e79-84f3003dce68
        chartCellId: 7b6a4b66-bbd8-4875-a513-6760da7b192e
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 780c5898-c991-4252-9e79-84f3003dce68
          cellLabel: "Atendimentos realizados: norte - % de atendimentos"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por ano",
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m  USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *,
                  "atendimentos por ano"/"pedidos de acolhimento por ano"::NUMERIC(10,4) AS percentage
              FROM capitals
              WHERE "região"= 'norte'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_12
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: atendimentos
                  renameTo: null
                  size: 161
                  wrapText: null
                  displayFormat: null
                - originalName: atendimentos_per_year
                  renameTo: null
                  size: 183
                  wrapText: null
                  displayFormat: null
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: capital x não capital
                  renameTo: null
                  size: 162
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: região
                  renameTo: null
                  size: 88
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 7b6a4b66-bbd8-4875-a513-6760da7b192e
          cellLabel: norte - % de atendimentos
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - percentage
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.6
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_12
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matches: "#ff7c43"
              atendimentos: "#f95d6a"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#CFD3DE"
            resultVariable: filter_result_53
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 44d542ba-83f2-4cd4-9b73-e2da205e4c7e # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 1c17edae-03fb-4af6-9c96-250cfe881dfe
        chartCellId: 5acdde0f-6bd2-444c-880d-f46865018363
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 1c17edae-03fb-4af6-9c96-250cfe881dfe
          cellLabel: "Atendimentos realizados: nordeste"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      CASE 
                          WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 'atendimentos' 
                          WHEN s.status = 'matched' THEN 'matches sem atendimento'
                          ELSE 'pedidos de acolhimento sem match' 
                      END AS categoria,
                      COUNT(*) AS total
                  FROM match.support_requests s
                  LEFT JOIN match.matches m  USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1, 2, 3, 4
              )
              SELECT
                  *
              FROM capitals
              WHERE "região"= 'nordeste'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_15
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 5acdde0f-6bd2-444c-880d-f46865018363
          cellLabel: nordeste
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  sort: ascending
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 400
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                      dataFrameColumns:
                        - total
                      colorDataFrameColumn: categoria
                      colorOrder: descending
                      color:
                        type: series
                        defaultColor: "#ffa600"
                        colorsBySeriesValues:
                          atendimentos: "#f95d6a"
                          matches sem atendimento: "#9CA3B4"
                          pedidos de acolhimento sem match: "#CFD3DE"
                      opacity:
                        type: series
                        opacitiesBySeriesValues:
                          atendimentos: 0.8
                          matches sem atendimento: 0.5
                          pedidos de acolhimento sem match: 0.5
                      tooltip:
                        type: manual
                        fields:
                          - type: number
                            dataFrameColumn: total
                          - type: string
                            dataFrameColumn: categoria
                      legendTitle: "   "
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_15
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              capital: "#ff7c43"
              matched: "#ffa600"
              matches: "#ff7c43"
              atendimentos: "#f95d6a"
              não capital: "#EECA3B"
              pedidos de acolhimento: "#ffa600"
              matches sem atendimento: "#9CA3B4"
              pedidos de acolhimento sem match: "#CFD3DE"
            resultVariable: filter_result_56
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 0c3bba4b-970a-4725-ba20-de596b8c9ed2 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 38bc97af-660f-4364-a045-eecd337930f4
        chartCellId: 1d850c86-16d6-469f-9e15-a2ea5e139d8c
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 38bc97af-660f-4364-a045-eecd337930f4
          cellLabel: "Atendimentos realizados: nordeste - % de atendimentos"
          config:
            source: |-
              WITH capitals AS (
                  SELECT
                      DATE_TRUNC('year', s.created_at) AS ano,
                      CASE
                          WHEN state IN ('AM', 'PA', 'AC', 'RR', 'RO', 'AP', 'TO') THEN 'norte'
                          WHEN state IN ('MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE', 'BA') THEN 'nordeste'
                          WHEN state IN ('SP', 'RJ', 'MG', 'ES') THEN 'sudeste'
                          WHEN state IN ('MT', 'MS', 'GO', 'DF') THEN 'centro-oeste'
                          WHEN state IN ('PR', 'SC', 'RS') THEN 'sul'
                          WHEN state = 'INT' THEN 'internacional'
                          ELSE 'não encontrado'
                      END AS "região",
                      CASE 
                          WHEN city = 'RIO BRANCO' AND state = 'AC' THEN 'capital'
                          WHEN city = 'MACEIO' AND state = 'AL' THEN 'capital'
                          WHEN city = 'MACAPA' AND state = 'AP' THEN 'capital'
                          WHEN city = 'MANAUS' AND state = 'AM' THEN 'capital'
                          WHEN city = 'SALVADOR' AND state = 'BA' THEN 'capital'
                          WHEN city = 'FORTALEZA' AND state = 'CE' THEN 'capital'
                          WHEN city = 'BRASILIA' AND state = 'DF' THEN 'capital'
                          WHEN city = 'VITORIA' AND state = 'ES' THEN 'capital'
                          WHEN city = 'GOIANIA' AND state = 'GO' THEN 'capital'
                          WHEN city = 'SAO LUIS' AND state = 'MA' THEN 'capital'
                          WHEN city = 'CUIABA' AND state = 'MT' THEN 'capital'
                          WHEN city = 'CAMPO GRANDE' AND state = 'MS' THEN 'capital'
                          WHEN city = 'BELO HORIZONTE' AND state = 'BH' THEN 'capital'
                          WHEN city = 'BELEM' AND state = 'PA' THEN 'capital'
                          WHEN city = 'JOAO PESSOA' AND state = 'PB' THEN 'capital'
                          WHEN city = 'CURITIBA' AND state = 'PR' THEN 'capital'
                          WHEN city = 'RECIFE' AND state = 'PE' THEN 'capital'
                          WHEN city = 'TERESINA' AND state = 'PI' THEN 'capital'
                          WHEN city = 'RIO DE JANEIRO' AND state = 'RJ' THEN 'capital'
                          WHEN city = 'NATAL' AND state = 'RN' THEN 'capital'
                          WHEN city = 'PORTO ALEGRE' AND state = 'RS' THEN 'capital'
                          WHEN city = 'PORTO VELHO' AND state = 'RO' THEN 'capital'
                          WHEN city = 'BOA VISTA' AND state = 'RR' THEN 'capital'
                          WHEN city = 'FLORIANOPOLIS' AND state = 'SC' THEN 'capital'
                          WHEN city = 'SAO PAULO' AND state = 'SP' THEN 'capital'
                          WHEN city = 'ARACAJU' AND state = 'SE' THEN 'capital'
                          WHEN city = 'PALMAS' AND state = 'TO' THEN 'capital'
                          ELSE 'não capital'
                      END AS "capital x não capital",
                      SUM(CASE WHEN m.status IN ('in_contact', 'interrupted_after_support', 'completed') THEN 1 ELSE 0 END) AS "atendimentos por ano",
                      COUNT(*) AS "pedidos de acolhimento por ano"
                  FROM match.support_requests s
                  LEFT JOIN match.matches m  USING (support_request_id)
                  WHERE s.status != 'duplicated'
                  GROUP BY 1, 2, 3
              )
              SELECT
                  *,
                  "atendimentos por ano"/"pedidos de acolhimento por ano"::NUMERIC(10,4) AS percentage
              FROM capitals
              WHERE "região"= 'nordeste'
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: pedidos_de_acolhimento_total_16
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: atendimentos
                  renameTo: null
                  size: 161
                  wrapText: null
                  displayFormat: null
                - originalName: atendimentos_per_year
                  renameTo: null
                  size: 183
                  wrapText: null
                  displayFormat: null
                - originalName: capital
                  renameTo: null
                  size: 91
                  wrapText: null
                  displayFormat: null
                - originalName: capital x não capital
                  renameTo: null
                  size: 162
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: cumulative_support_request_count
                  renameTo: null
                  size: 247
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: percentage
                  renameTo: null
                  size: 116
                  wrapText: null
                  displayFormat: null
                - originalName: região
                  renameTo: null
                  size: 88
                  wrapText: null
                  displayFormat: null
                - originalName: support_request_per_year
                  renameTo: null
                  size: 199
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 1d850c86-16d6-469f-9e15-a2ea5e139d8c
          cellLabel: nordeste - % de atendimentos
          config:
            height: null
            chartSpec:
              type: layered
              facet:
                facetHorizontal:
                  type: string
                  dataFrameColumn: capital x não capital
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: ano
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 1
                          grid:
                            style: dash
                          ticks:
                            count: 3
                          labels: {}
                        title: "   "
                        numberFormat:
                          format: PERCENT
                          currency: USD
                          columnType: NUMBER
                          numDecimalDigits: 0
                          abbreviateLargeNumbers: false
                      dataFrameColumns:
                        - percentage
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#003f5c"
                      opacity:
                        type: static
                        value: 0.6
                      dataLabels:
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: stacked
                  dataFrame: pedidos_de_acolhimento_total_16
              settings:
                legend:
                  position: bottom
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_57
            outputResult: false
            displayTableConfig: null
  - cellType: MARKDOWN
    cellId: 9b66307c-bf54-4b4e-bd45-68e09a879047 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: Atendimentos concluídos
    config:
      source: |-
        -------------
        # Atendimentos concluídos
        Total de matches que estão com `Status do Acolhimento = Atendimento: Concluído`
  - cellType: BLOCK
    cellId: 96f40a35-fb71-4d91-ae24-fc0c221bc26d # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 73c21702-8482-46e7-bbd4-06f7678d63e1
        chartCellId: 497fc6da-c08e-4ef1-a4d5-d25373e5cc41
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 73c21702-8482-46e7-bbd4-06f7678d63e1
          cellLabel: total
          config:
            source: |-
              WITH completed_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS year,
                      COUNT(*) AS completed_per_year
                  FROM match.matches
                  WHERE status = 'completed'
                  GROUP BY 1
              )
              SELECT
                  *,
                  SUM(completed_per_year) OVER(ORDER BY year)::INT AS cumulative_completed_count
              FROM completed_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: atendimentos_concluidos_total
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 497fc6da-c08e-4ef1-a4d5-d25373e5cc41
          cellLabel: total
          config:
            height: 540
            chartSpec:
              type: layered
              layers:
                - id: 9d599e25-51f0-45f5-8507-ee3dc3a9f4f3
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: solid
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: year
                  series:
                    - id: e76990b4-be12-4e5a-bdf6-9ca0aa9e5a6e
                      type: area
                      axis:
                        type: number
                        style:
                          max: 600
                          grid:
                            style: solid
                          ticks:
                            count: 5
                          labels: {}
                        title: "    "
                        aggregate: sum
                      dataFrameColumns:
                        - cumulative_completed_count
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#2f4b7c"
                      opacity:
                        type: static
                        value: 0.5
                      tooltip:
                        type: auto
                      dataLabels:
                        position: above
                      line: true
                      point: true
                      normalize: false
                  dataFrame: atendimentos_concluidos_total
              settings:
                legend:
                  position: none
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings:
              "50000": "#f95d6a"
            resultVariable: filter_result_11
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 8502d2d5-3c8a-4e5d-896b-2569e2cfc3c5 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 39e81d7f-82ed-4ce8-9ac7-9d9bd2ecc7ee
        chartCellId: 001c8456-6f75-41c0-97c3-cffa836dee7a
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 39e81d7f-82ed-4ce8-9ac7-9d9bd2ecc7ee
          cellLabel: por ano
          config:
            source: |-
              WITH completed_per_year AS (
                  SELECT
                      DATE_TRUNC('year', created_at) AS year,
                      COUNT(*) AS completed_per_year
                  FROM match.matches
                  WHERE status = 'completed'
                  GROUP BY 1
              )
              SELECT
                  *,
                  SUM(completed_per_year) OVER(ORDER BY year)::INT AS cumulative_completed_count
              FROM completed_per_year
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: atendimentos_concluidos_por_ano
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties:
                - originalName: cumulative_msr_count
                  renameTo: null
                  size: 177
                  wrapText: null
                  displayFormat: null
                - originalName: msr_per_year
                  renameTo: null
                  size: 128
                  wrapText: null
                  displayFormat: null
                - originalName: year
                  renameTo: null
                  size: 214
                  wrapText: null
                  displayFormat: null
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: 001c8456-6f75-41c0-97c3-cffa836dee7a
          cellLabel: por ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: 6ff97472-39e7-4f44-9895-6aa30914ccd6
                  xAxis:
                    type: datetime
                    style:
                      max: 1735700400000
                      min: 1514772000000
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: ano
                    timeUnit: year
                    dataFrameColumn: year
                  series:
                    - id: 80616841-4fb3-4d01-8525-df2bab0f19a6
                      type: bar
                      axis:
                        type: number
                        style:
                          max: 150
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "      "
                        aggregate: sum
                      dataFrameColumns:
                        - completed_per_year
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#2f4b7c"
                      opacity:
                        type: static
                        value: 0.7
                      tooltip:
                        type: auto
                      dataLabels:
                        fontSize: 10
                        position: outside-end
                      barWidth: 1
                      orientation: vertical
                      layout: grouped
                  dataFrame: atendimentos_concluidos_por_ano
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_12
            outputResult: false
            displayTableConfig: null
  - cellType: BLOCK
    cellId: 6a24c619-0bd5-4ffd-8ab9-5287b182c2a7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      blockConfig:
        sqlCellId: 28b831c3-fa27-4b25-9bc9-e3b1c89ac3f8
        chartCellId: a5d03e48-1074-472e-bf92-8304130c0dec
        activeTab: chart
      cells:
        - cellType: SQL
          cellId: 28b831c3-fa27-4b25-9bc9-e3b1c89ac3f8
          cellLabel: por mês no último ano
          config:
            source: |-
              WITH completed_per_month AS (
                  SELECT
                      DATE_TRUNC('month', created_at) AS month,
                      COUNT(*) AS completed_per_month
                  FROM match.matches
                  WHERE 
                      created_at >= CURRENT_DATE - INTERVAL '1 YEAR'
                      AND status = 'completed'
                  GROUP BY 1
              )
              SELECT *
              FROM completed_per_month
            dataFrameCell: false
            dataConnectionId: 683fd824-f935-4980-b99d-a7a513df5030
            resultVariableName: atendimentos_concluidos_por_mes
            useRichDisplay: true
            sqlCellOutputType: PANDAS
            useQueryMode: false
            castDecimals: true
            useNativeDates: true
            outputFilteredResult: true
            allowDuplicateColumns: false
            tableDisplayConfig:
              pageSize: 50
              height: null
              hideIcons: false
              hideIndex: false
              defaultSortColumn: null
              defaultSortIndexColumn: null
              defaultSortDirection: ASC
              conditionalFormatting: null
              filters: null
              columnProperties: []
              columnOrdering: null
              pinnedColumns: null
              hiddenColumns: null
        - cellType: CHARTV2
          cellId: a5d03e48-1074-472e-bf92-8304130c0dec
          cellLabel: por mês no último ano
          config:
            height: null
            chartSpec:
              type: layered
              layers:
                - id: f4161324-1f31-49c8-a1ad-0f1a04b9b6ad
                  xAxis:
                    type: datetime
                    style:
                      grid:
                        style: dash
                      ticks: {}
                      labels: {}
                    title: mês
                    dataFrameColumn: month
                  series:
                    - id: 306c0ab5-ab54-42b8-a955-cd9d00e1d985
                      type: line
                      axis:
                        type: number
                        style:
                          max: 12
                          grid:
                            style: dash
                          ticks:
                            count: 5
                          labels: {}
                        title: "          "
                        aggregate: sum
                      dataFrameColumns:
                        - completed_per_month
                      colorOrder: ascending
                      color:
                        type: static
                        color: "#2f4b7c"
                      opacity:
                        type: static
                        value: 0.9
                      tooltip:
                        type: auto
                      dataLabels:
                        fontSize: 10
                        position: above
                      point: true
                      stroke: solid
                      width: 3
                  dataFrame: atendimentos_concluidos_por_mes
              settings:
                legend:
                  position: right
                tooltip: true
                selectionEnabled: false
            chartSelection: {}
            colorMappings: {}
            resultVariable: filter_result_13
            outputResult: false
            displayTableConfig: null
  - cellType: INPUT
    cellId: 9255733b-fbc6-42b3-8394-e8d2cc4868c7 # DO NOT CHANGE - Hex uses this to match up cells when reimporting the file, and detect any changes to existing cells
    cellLabel: null
    config:
      inputType: FILE_UPLOAD
      name: input_1
      outputType: DATA_FRAME
      options: null
      defaultValue: null
appLayout:
  visibleMetadataFields:
    - NAME
    - DESCRIPTION
    - AUTHOR
    - LAST_EDITED
    - LAST_RUN
    - CATEGORIES
    - STATUS
    - TABLE_OF_CONTENTS
  fullWidth: false
  tabs:
    - name: Tab 1
      rows:
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: a321b720-6994-440d-8a99-8284253733b5
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 40
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 0d81bcd1-5686-49c3-bea5-56215e32c5c5
                  sharedFilterId: null
                  height: 350
                  showLabel: true
            - start: 40
              end: 80
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 8e562d19-a572-4175-ae6b-9c2cd8665ddf
                  sharedFilterId: null
                  height: 350
                  showLabel: true
            - start: 80
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: aa413244-21e7-4eee-bd3e-15c02671c263
                  sharedFilterId: null
                  height: 350
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: c002bb69-1b10-47d1-b372-a3b49ef81ba5
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: afedb86f-ee9b-4cda-8d20-82000ca4f84a
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 40
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: bd1e7eb7-53d6-4a21-a675-c618354b8000
                  sharedFilterId: null
                  height: 350
                  showLabel: true
            - start: 40
              end: 80
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 838856fc-81e0-4c56-bd35-543b18e2a722
                  sharedFilterId: null
                  height: 350
                  showLabel: true
            - start: 80
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 015535df-0080-49e2-b500-c495c5850131
                  sharedFilterId: null
                  height: 350
                  showLabel: true
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 447de4f4-a368-4494-a61c-2745bdaaf06a
                  sharedFilterId: null
                  height: null
                  showLabel: false
            - start: 85
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 1c55bd0e-de54-4cb9-845e-4b5a78992a2e
                  sharedFilterId: null
                  height: null
                  showLabel: true
        - columns:
            - start: 0
              end: 30
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: e2b99b3d-df80-4357-8e7b-b82ab776b72e
                  sharedFilterId: null
                  height: 550
                  showLabel: true
            - start: 30
              end: 70
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 7810c2a3-04b0-4b7f-8cba-567a6b95d632
                  sharedFilterId: null
                  height: 350
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 333a89b1-3bd7-4a43-8bb2-d17184ba98f7
                  sharedFilterId: null
                  height: 200
                  showLabel: true
            - start: 70
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 74c2d5b1-55cc-4007-a1d3-93a3414fdb4f
                  sharedFilterId: null
                  height: 550
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 336b0f16-5bb0-42a2-b478-cc6d875091b9
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 55
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: b53daa02-1ec8-4772-9eb6-0627275be618
                  sharedFilterId: null
                  height: 250
                  showLabel: true
            - start: 55
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 8014c5eb-63d3-4d2e-a329-d9ab2401caef
                  sharedFilterId: null
                  height: 250
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: d7931a8e-450e-45a2-a775-4a29bfee6a5d
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 15cf8346-acf8-4198-9033-67ac7e863268
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 40
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: ad110c7f-feb1-438a-867f-54a74489116c
                  sharedFilterId: null
                  height: 400
                  showLabel: true
            - start: 40
              end: 80
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: d78b13e7-d70f-494e-8bdd-73e95f6f9deb
                  sharedFilterId: null
                  height: 400
                  showLabel: true
            - start: 80
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: c5755ce5-d9ca-4537-a922-9a9298a5c49a
                  sharedFilterId: null
                  height: 400
                  showLabel: true
        - columns:
            - start: 0
              end: 20
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 76ed1a7e-4871-411b-adf4-1e1f9d5a2db5
                  sharedFilterId: null
                  height: 20
                  showLabel: false
            - start: 85
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 9c0f378c-4506-441a-9260-281715116532
                  sharedFilterId: null
                  height: null
                  showLabel: true
        - columns:
            - start: 0
              end: 25
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 8c403bb3-e109-4e5d-bd9f-e51e8ab07033
                  sharedFilterId: null
                  height: 600
                  showLabel: true
            - start: 25
              end: 50
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: cb36e99f-eccc-4087-b583-8fbfa2230d8c
                  sharedFilterId: null
                  height: 550
                  showLabel: false
            - start: 50
              end: 85
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f51126e1-9a1b-4cab-b393-8a27082cbf59
                  sharedFilterId: null
                  height: 350
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 95611aa9-f668-4c91-be28-2593a0c275eb
                  sharedFilterId: null
                  height: 200
                  showLabel: true
            - start: 85
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 85162751-d5fb-4e48-b9f2-1fd4aab3a365
                  sharedFilterId: null
                  height: 350
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 5fbf364b-8b56-4ec5-a262-7228fb8bef88
                  sharedFilterId: null
                  height: 150
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 69f483f0-8c46-4ba1-8fd0-900d121b4d7a
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 5c08794a-9b10-4707-a57b-d218c8e7e9c6
                  sharedFilterId: null
                  height: 300
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f3af0832-89ba-460f-8456-f9bfad9b3a3f
                  sharedFilterId: null
                  height: 300
                  showLabel: true
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: dc0ea240-0099-4a25-b308-ad6e08a0d980
                  sharedFilterId: null
                  height: 300
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 03bdb911-14e7-4b77-bb5d-77bb2e8c9507
                  sharedFilterId: null
                  height: 300
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: af23a142-2a9c-45fe-90a9-1af961cf95a5
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 8e3e4fe2-1518-48bc-94ee-cdfeb13d25f2
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 40
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f37b0e87-7d59-4e25-9a5d-a0cf3e75a6a7
                  sharedFilterId: null
                  height: 400
                  showLabel: true
            - start: 40
              end: 80
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 6b8f964a-100f-4838-b781-400664fbd914
                  sharedFilterId: null
                  height: 400
                  showLabel: true
            - start: 80
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 09e3a1d8-52a8-4971-8631-9edfa55b4b4c
                  sharedFilterId: null
                  height: 400
                  showLabel: true
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: f779663e-8844-4d0a-840f-96a33e168128
                  sharedFilterId: null
                  height: null
                  showLabel: false
            - start: 90
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 883af184-1ef5-47d7-be40-4dfc2708cd6b
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 25
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 4137f418-8623-4832-8b50-4a07d393cb78
                  sharedFilterId: null
                  height: 600
                  showLabel: true
            - start: 25
              end: 50
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 31fd4c39-30b5-46ce-b7e7-a3379537685f
                  sharedFilterId: null
                  height: 550
                  showLabel: true
            - start: 50
              end: 85
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 9810162e-9c26-49c0-a160-816b4dd9ad10
                  sharedFilterId: null
                  height: 350
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 37eda986-d7f8-4a2d-aad2-87dfdd950a4f
                  sharedFilterId: null
                  height: 200
                  showLabel: true
            - start: 85
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 9367b08d-fb93-4b28-b212-a174804f5aa2
                  sharedFilterId: null
                  height: 350
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 0c5eb9b6-5d46-41b0-933a-f415459d02e0
                  sharedFilterId: null
                  height: 150
                  showLabel: true
        - columns:
            - start: 0
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 2da72370-3165-40dc-9070-97db4d122c1d
                  sharedFilterId: null
                  height: null
                  showLabel: false
        - columns:
            - start: 0
              end: 60
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 64b63ea9-e9df-4b7e-9b94-8fdb57413d69
                  sharedFilterId: null
                  height: 300
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 780c5898-c991-4252-9e79-84f3003dce68
                  sharedFilterId: null
                  height: 300
                  showLabel: true
            - start: 60
              end: 120
              elements:
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 1c17edae-03fb-4af6-9c96-250cfe881dfe
                  sharedFilterId: null
                  height: 300
                  showLabel: true
                - showSource: false
                  hideOutput: false
                  type: CELL
                  cellId: 38bc97af-660f-4364-a045-eecd337930f4
                  sharedFilterId: null
                  height: 300
                  showLabel: true
sharedFilters: []
